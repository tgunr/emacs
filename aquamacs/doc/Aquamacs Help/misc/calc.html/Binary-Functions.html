<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: Binary Functions</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: Binary Functions" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: Binary Functions" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Arithmetic.html#Arithmetic" rel="up" title=
  "Arithmetic" />
  <link href="Scientific-Functions.html#Scientific-Functions" rel=
  "next" title="Scientific Functions" />
  <link href=
  "Definitions-of-Financial-Functions.html#Definitions-of-Financial-Functions"
  rel="prev" title="Definitions of Financial Functions" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Binary-Functions" id="Binary-Functions"></a>

  <div class="header">
    <p>Previous: <a href=
    "Financial-Functions.html#Financial-Functions" accesskey="p"
    rel="prev">Financial Functions</a>, Up: <a href=
    "Arithmetic.html#Arithmetic" accesskey="u" rel=
    "up">Arithmetic</a> &nbsp; [<a href="index.html#SEC_Contents"
    title="Table of contents" rel="contents">Contents</a>][<a href=
    "Key-Index.html#Key-Index" title="Index" rel=
    "index">Index</a>]</p>
  </div>
  <hr />
  <a name="Binary-Number-Functions" id=
  "Binary-Number-Functions"></a>

  <h3 class="section">7.7 Binary Number Functions</h3>

  <p>The commands in this chapter all use two-letter sequences
  beginning with the <kbd>b</kbd> prefix.</p><a name=
  "index-Binary-numbers" id="index-Binary-numbers"></a>

  <p>The &ldquo;binary&rdquo; operations actually work regardless
  of the currently displayed radix, although their results make the
  most sense in a radix like 2, 8, or 16 (as obtained by the <kbd>d
  2</kbd>, <kbd>d 8</kbd>, or <kbd>d&nbsp;6</kbd><!-- /@w -->
   commands, respectively). You may also wish to enable display of
  leading zeros with <kbd>d z</kbd>. See <a href=
  "Radix-Modes.html#Radix-Modes">Radix Modes</a>.</p><a name=
  "index-Word-size-for-binary-operations" id=
  "index-Word-size-for-binary-operations"></a>

  <p>The Calculator maintains a current <em>word size</em>
  &lsquo;<samp>w</samp>&rsquo;, an arbitrary positive or negative
  integer. For a positive word size, all of the binary operations
  described here operate modulo &lsquo;<samp>2^w</samp>&rsquo;. In
  particular, negative arguments are converted to positive integers
  modulo &lsquo;<samp>2^w</samp>&rsquo; by all binary
  functions.</p>

  <p>If the word size is negative, binary operations produce
  twos-complement integers from
  &lsquo;<samp>-(2^(-w-1))</samp>&rsquo; to
  &lsquo;<samp>2^(-w-1)-1</samp>&rsquo; inclusive. Either mode
  accepts inputs in any range; the sign of
  &lsquo;<samp>w</samp>&rsquo; affects only the results
  produced.</p><a name="index-b-c" id="index-b-c"></a> <a name=
  "index-calc_002dclip" id="index-calc_002dclip"></a> <a name=
  "index-clip" id="index-clip"></a>

  <p>The <kbd>b c</kbd> (<code>calc-clip</code>)
  [<code>clip</code>] command can be used to clip a number by
  reducing it modulo &lsquo;<samp>2^w</samp>&rsquo;. The commands
  described in this chapter automatically clip their results to the
  current word size. Note that other operations like addition do
  not use the current word size, since integer addition generally
  is not &ldquo;binary.&rdquo; (However, see <a href=
  "Simplification-Modes.html#Simplification-Modes">Simplification
  Modes</a>, <code>calc-bin-simplify-mode</code>.) For example,
  with a word size of 8 bits <kbd>b c</kbd> converts a number to
  the range 0 to 255; with a word size of <i>-8</i> <kbd>b c</kbd>
  converts to the range <i>-128</i> to 127.</p><a name="index-b-w"
  id="index-b-w"></a> <a name="index-calc_002dword_002dsize" id=
  "index-calc_002dword_002dsize"></a>

  <p>The default word size is 32 bits. All operations except the
  shifts and rotates allow you to specify a different word size for
  that one operation by giving a numeric prefix argument: <kbd>C-u
  8 b c</kbd> clips the top of stack to the range 0 to 255
  regardless of the current word size. To set the word size
  permanently, use <kbd>b w</kbd> (<code>calc-word-size</code>).
  This command displays a prompt with the current word size; press
  <tt class="key">RET</tt> immediately to keep this word size, or
  type a new word size at the prompt.</p>

  <p>When the binary operations are written in symbolic form, they
  take an optional second (or third) word-size parameter. When a
  formula like &lsquo;<samp>and(a,b)</samp>&rsquo; is finally
  evaluated, the word size current at that time will be used, but
  when &lsquo;<samp>and(a,b,-8)</samp>&rsquo; is evaluated, a word
  size of <i>-8</i> will always be used. A symbolic binary function
  will be left in symbolic form unless the all of its argument(s)
  are integers or integer-valued floats.</p>

  <p>If either or both arguments are modulo forms for which
  &lsquo;<samp>M</samp>&rsquo; is a power of two, that power of two
  is taken as the word size unless a numeric prefix argument
  overrides it. The current word size is never consulted when
  modulo-power-of-two forms are involved.</p><a name="index-b-a"
  id="index-b-a"></a> <a name="index-calc_002dand" id=
  "index-calc_002dand"></a> <a name="index-and" id="index-and"></a>

  <p>The <kbd>b a</kbd> (<code>calc-and</code>) [<code>and</code>]
  command computes the bitwise AND of the two numbers on the top of
  the stack. In other words, for each of the
  &lsquo;<samp>w</samp>&rsquo; binary digits of the two numbers
  (pairwise), the corresponding bit of the result is 1 if and only
  if both input bits are 1: &lsquo;<samp>and(2#1100, 2#1010) =
  2#1000</samp>&rsquo;.</p><a name="index-b-o" id="index-b-o"></a>
  <a name="index-calc_002dor" id="index-calc_002dor"></a> <a name=
  "index-or" id="index-or"></a>

  <p>The <kbd>b o</kbd> (<code>calc-or</code>) [<code>or</code>]
  command computes the bitwise inclusive OR of two numbers. A bit
  is 1 if either of the input bits, or both, are 1:
  &lsquo;<samp>or(2#1100, 2#1010) =
  2#1110</samp>&rsquo;.</p><a name="index-b-x" id="index-b-x"></a>
  <a name="index-calc_002dxor" id="index-calc_002dxor"></a>
  <a name="index-xor" id="index-xor"></a>

  <p>The <kbd>b x</kbd> (<code>calc-xor</code>) [<code>xor</code>]
  command computes the bitwise exclusive OR of two numbers. A bit
  is 1 if exactly one of the input bits is 1:
  &lsquo;<samp>xor(2#1100, 2#1010) =
  2#0110</samp>&rsquo;.</p><a name="index-b-d" id="index-b-d"></a>
  <a name="index-calc_002ddiff" id="index-calc_002ddiff"></a>
  <a name="index-diff" id="index-diff"></a>

  <p>The <kbd>b d</kbd> (<code>calc-diff</code>)
  [<code>diff</code>] command computes the bitwise difference of
  two numbers; this is defined by &lsquo;<samp>diff(a,b) =
  and(a,not(b))</samp>&rsquo;, so that &lsquo;<samp>diff(2#1100,
  2#1010) = 2#0100</samp>&rsquo;.</p><a name="index-b-n" id=
  "index-b-n"></a> <a name="index-calc_002dnot" id=
  "index-calc_002dnot"></a> <a name="index-not" id="index-not"></a>

  <p>The <kbd>b n</kbd> (<code>calc-not</code>) [<code>not</code>]
  command computes the bitwise NOT of a number. A bit is 1 if the
  input bit is 0 and vice-versa.</p><a name="index-b-l" id=
  "index-b-l"></a> <a name="index-calc_002dlshift_002dbinary" id=
  "index-calc_002dlshift_002dbinary"></a> <a name="index-lsh" id=
  "index-lsh"></a>

  <p>The <kbd>b l</kbd> (<code>calc-lshift-binary</code>)
  [<code>lsh</code>] command shifts a number left by one bit, or by
  the number of bits specified in the numeric prefix argument. A
  negative prefix argument performs a logical right shift, in which
  zeros are shifted in on the left. In symbolic form,
  &lsquo;<samp>lsh(a)</samp>&rsquo; is short for
  &lsquo;<samp>lsh(a,1)</samp>&rsquo;, which in turn is short for
  &lsquo;<samp>lsh(a,n,w)</samp>&rsquo;. Bits shifted &ldquo;off
  the end,&rdquo; according to the current word size, are
  lost.</p><a name="index-H-b-l" id="index-H-b-l"></a> <a name=
  "index-H-b-r" id="index-H-b-r"></a> <a name="index-H-b-L" id=
  "index-H-b-L"></a> <a name="index-H-b-R" id="index-H-b-R"></a>
  <a name="index-H-b-t" id="index-H-b-t"></a>

  <p>The <kbd>H b l</kbd> command also does a left shift, but it
  takes two arguments from the stack (the value to shift, and, at
  top-of-stack, the number of bits to shift). This version
  interprets the prefix argument just like the regular binary
  operations, i.e., as a word size. The Hyperbolic flag has a
  similar effect on the rest of the binary shift and rotate
  commands.</p><a name="index-b-r" id="index-b-r"></a> <a name=
  "index-calc_002drshift_002dbinary" id=
  "index-calc_002drshift_002dbinary"></a> <a name="index-rsh" id=
  "index-rsh"></a>

  <p>The <kbd>b r</kbd> (<code>calc-rshift-binary</code>)
  [<code>rsh</code>] command shifts a number right by one bit, or
  by the number of bits specified in the numeric prefix argument:
  &lsquo;<samp>rsh(a,n) = lsh(a,-n)</samp>&rsquo;.</p><a name=
  "index-b-L" id="index-b-L"></a> <a name=
  "index-calc_002dlshift_002darith" id=
  "index-calc_002dlshift_002darith"></a> <a name="index-ash" id=
  "index-ash"></a>

  <p>The <kbd>b L</kbd> (<code>calc-lshift-arith</code>)
  [<code>ash</code>] command shifts a number left. It is analogous
  to <code>lsh</code>, except that if the shift is rightward (the
  prefix argument is negative), an arithmetic shift is performed as
  described below.</p><a name="index-b-R" id="index-b-R"></a>
  <a name="index-calc_002drshift_002darith" id=
  "index-calc_002drshift_002darith"></a> <a name="index-rash" id=
  "index-rash"></a>

  <p>The <kbd>b R</kbd> (<code>calc-rshift-arith</code>)
  [<code>rash</code>] command performs an &ldquo;arithmetic&rdquo;
  shift to the right, in which the leftmost bit (according to the
  current word size) is duplicated rather than shifting in zeros.
  This corresponds to dividing by a power of two where the input is
  interpreted as a signed, twos-complement number. (The distinction
  between the &lsquo;<samp>rsh</samp>&rsquo; and
  &lsquo;<samp>rash</samp>&rsquo; operations is totally independent
  from whether the word size is positive or negative.) With a
  negative prefix argument, this performs a standard left
  shift.</p><a name="index-b-t" id="index-b-t"></a> <a name=
  "index-calc_002drotate_002dbinary" id=
  "index-calc_002drotate_002dbinary"></a> <a name="index-rot" id=
  "index-rot"></a>

  <p>The <kbd>b t</kbd> (<code>calc-rotate-binary</code>)
  [<code>rot</code>] command rotates a number one bit to the left.
  The leftmost bit (according to the current word size) is dropped
  off the left and shifted in on the right. With a numeric prefix
  argument, the number is rotated that many bits to the left or
  right.</p>

  <p>See <a href="Set-Operations.html#Set-Operations">Set
  Operations</a>, for the <kbd>b p</kbd> and <kbd>b u</kbd>
  commands that pack and unpack binary integers into sets. (For
  example, <kbd>b u</kbd> unpacks the number
  &lsquo;<samp>2#11001</samp>&rsquo; to the set of bit-numbers
  &lsquo;<samp>[0, 3, 4]</samp>&rsquo;.) Type <kbd>b u V #</kbd> to
  count the number of &ldquo;1&rdquo; bits in a binary integer.</p>

  <p>Another interesting use of the set representation of binary
  integers is to reverse the bits in, say, a 32-bit integer. Type
  <kbd>b u</kbd> to unpack; type <kbd>31 <span class=
  "key">TAB</span> -</kbd> to replace each bit-number in the set
  with 31 minus that bit-number; type <kbd>b p</kbd> to pack the
  set back into a binary integer.</p>
  <hr />

  <div class="header">
    <p>Previous: <a href=
    "Financial-Functions.html#Financial-Functions" accesskey="p"
    rel="prev">Financial Functions</a>, Up: <a href=
    "Arithmetic.html#Arithmetic" accesskey="u" rel=
    "up">Arithmetic</a> &nbsp; [<a href="index.html#SEC_Contents"
    title="Table of contents" rel="contents">Contents</a>][<a href=
    "Key-Index.html#Key-Index" title="Index" rel=
    "index">Index</a>]</p>
  </div>
</body>
</html>
