<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: Programming Answer 7</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: Programming Answer 7" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: Programming Answer 7" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Answers-to-Exercises.html#Answers-to-Exercises" rel=
  "up" title="Answers to Exercises" />
  <link href="Programming-Answer-8.html#Programming-Answer-8" rel=
  "next" title="Programming Answer 8" />
  <link href="Programming-Answer-6.html#Programming-Answer-6" rel=
  "prev" title="Programming Answer 6" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Programming-Answer-7" id="Programming-Answer-7"></a>

  <div class="header">
    <p>Next: <a href=
    "Programming-Answer-8.html#Programming-Answer-8" accesskey="n"
    rel="next">Programming Answer 8</a>, Previous: <a href=
    "Programming-Answer-6.html#Programming-Answer-6" accesskey="p"
    rel="prev">Programming Answer 6</a>, Up: <a href=
    "Answers-to-Exercises.html#Answers-to-Exercises" accesskey="u"
    rel="up">Answers to Exercises</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Programming-Tutorial-Exercise-7" id=
  "Programming-Tutorial-Exercise-7"></a>

  <h4 class="subsection">2.7.64 Programming Tutorial Exercise
  7</h4>

  <p>The trick here is to compute the harmonic numbers differently,
  so that the loop counter itself accumulates the sum of
  reciprocals. We use a separate variable to hold the integer
  counter.</p>

  <div class="smallexample">
    <pre class="smallexample">
1:  1          2:  1       1:  .
    .          1:  4
                   .

    1 t 1       1 <span class=
"key">RET</span> 4      Z ( t 2 r 1 1 + s 1 &amp; Z )
</pre>
  </div>

  <p>The body of the loop goes as follows: First save the harmonic
  sum so far in variable 2. Then delete it from the stack; the for
  loop itself will take care of remembering it for us. Next, recall
  the count from variable 1, add one to it, and feed its reciprocal
  to the for loop to use as the step value. The for loop will
  increase the &ldquo;loop counter&rdquo; by that amount and keep
  going until the loop counter exceeds 4.</p>

  <div class="smallexample">
    <pre class="smallexample">
2:  31                  3:  31
1:  3.99498713092       2:  3.99498713092
    .                   1:  4.02724519544
                            .

    r 1 r 2                 <span class="key">RET</span> 31 &amp; +
</pre>
  </div>

  <p>Thus we find that the 30th harmonic number is 3.99, and the
  31st harmonic number is 4.02.</p>
</body>
</html>
