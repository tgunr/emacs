<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: Date Functions</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: Date Functions" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: Date Functions" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Date-Arithmetic.html#Date-Arithmetic" rel="up" title=
  "Date Arithmetic" />
  <link href="Business-Days.html#Business-Days" rel="next" title=
  "Business Days" />
  <link href="Date-Conversions.html#Date-Conversions" rel="prev"
  title="Date Conversions" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Date-Functions" id="Date-Functions"></a>

  <div class="header">
    <p>Next: <a href="Business-Days.html#Business-Days" accesskey=
    "n" rel="next">Business Days</a>, Previous: <a href=
    "Date-Conversions.html#Date-Conversions" accesskey="p" rel=
    "prev">Date Conversions</a>, Up: <a href=
    "Date-Arithmetic.html#Date-Arithmetic" accesskey="u" rel=
    "up">Date Arithmetic</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Date-Functions-1" id="Date-Functions-1"></a>

  <h4 class="subsection">7.5.2 Date Functions</h4><a name=
  "index-t-N" id="index-t-N"></a> <a name="index-calc_002dnow" id=
  "index-calc_002dnow"></a> <a name="index-now" id="index-now"></a>

  <p>The <kbd>t N</kbd> (<code>calc-now</code>) [<code>now</code>]
  command pushes the current date and time on the stack as a date
  form. The time is reported in terms of the specified time zone;
  with no numeric prefix argument, <kbd>t N</kbd> reports for the
  current time zone.</p><a name="index-t-P" id="index-t-P"></a>
  <a name="index-calc_002ddate_002dpart" id=
  "index-calc_002ddate_002dpart"></a>

  <p>The <kbd>t P</kbd> (<code>calc-date-part</code>) command
  extracts one part of a date form. The prefix argument specifies
  the part; with no argument, this command prompts for a part code
  from 1 to 9. The various part codes are described in the
  following paragraphs.</p><a name="index-year" id=
  "index-year"></a>

  <p>The <kbd>M-1 t P</kbd> [<code>year</code>] function extracts
  the year number from a date form as an integer, e.g., 1991. This
  and the following functions will also accept a real number for an
  argument, which is interpreted as a standard Calc day number.
  Note that this function will never return zero, since the year 1
  BC immediately precedes the year 1 AD.</p><a name="index-month"
  id="index-month"></a>

  <p>The <kbd>M-2 t P</kbd> [<code>month</code>] function extracts
  the month number from a date form as an integer in the range 1 to
  12.</p><a name="index-day" id="index-day"></a>

  <p>The <kbd>M-3 t P</kbd> [<code>day</code>] function extracts
  the day number from a date form as an integer in the range 1 to
  31.</p><a name="index-hour" id="index-hour"></a>

  <p>The <kbd>M-4 t P</kbd> [<code>hour</code>] function extracts
  the hour from a date form as an integer in the range 0 (midnight)
  to 23. Note that 24-hour time is always used. This returns zero
  for a pure date form. This function (and the following two) also
  accept HMS forms as input.</p><a name="index-minute" id=
  "index-minute"></a>

  <p>The <kbd>M-5 t P</kbd> [<code>minute</code>] function extracts
  the minute from a date form as an integer in the range 0 to
  59.</p><a name="index-second" id="index-second"></a>

  <p>The <kbd>M-6 t P</kbd> [<code>second</code>] function extracts
  the second from a date form. If the current precision is 12 or
  less, the result is an integer in the range 0 to 59. For higher
  precision, the result may instead be a floating-point
  number.</p><a name="index-weekday" id="index-weekday"></a>

  <p>The <kbd>M-7 t P</kbd> [<code>weekday</code>] function
  extracts the weekday number from a date form as an integer in the
  range 0 (Sunday) to 6 (Saturday).</p><a name="index-yearday" id=
  "index-yearday"></a>

  <p>The <kbd>M-8 t P</kbd> [<code>yearday</code>] function
  extracts the day-of-year number from a date form as an integer in
  the range 1 (January 1) to 366 (December 31 of a leap
  year).</p><a name="index-time" id="index-time"></a>

  <p>The <kbd>M-9 t P</kbd> [<code>time</code>] function extracts
  the time portion of a date form as an HMS form. This returns
  &lsquo;<samp>0@ 0' 0"</samp>&rsquo; for a pure date
  form.</p><a name="index-t-M" id="index-t-M"></a> <a name=
  "index-calc_002dnew_002dmonth" id=
  "index-calc_002dnew_002dmonth"></a> <a name="index-newmonth" id=
  "index-newmonth"></a>

  <p>The <kbd>t M</kbd> (<code>calc-new-month</code>)
  [<code>newmonth</code>] command computes a new date form that
  represents the first day of the month specified by the input
  date. The result is always a pure date form; only the year and
  month numbers of the input are retained. With a numeric prefix
  argument <var>n</var> in the range from 1 to 31, <kbd>t M</kbd>
  computes the <var>n</var>th day of the month. (If <var>n</var> is
  greater than the actual number of days in the month, or if
  <var>n</var> is zero, the last day of the month is
  used.)</p><a name="index-t-Y" id="index-t-Y"></a> <a name=
  "index-calc_002dnew_002dyear" id=
  "index-calc_002dnew_002dyear"></a> <a name="index-newyear" id=
  "index-newyear"></a>

  <p>The <kbd>t Y</kbd> (<code>calc-new-year</code>)
  [<code>newyear</code>] command computes a new pure date form that
  represents the first day of the year specified by the input. The
  month, day, and time of the input date form are lost. With a
  numeric prefix argument <var>n</var> in the range from 1 to 366,
  <kbd>t Y</kbd> computes the <var>n</var>th day of the year (366
  is treated as 365 in non-leap years). A prefix argument of 0
  computes the last day of the year (December 31). A negative
  prefix argument from <i>-1</i> to <i>-12</i> computes the first
  day of the <var>n</var>th month of the year.</p><a name=
  "index-t-W" id="index-t-W"></a> <a name=
  "index-calc_002dnew_002dweek" id=
  "index-calc_002dnew_002dweek"></a> <a name="index-newweek" id=
  "index-newweek"></a>

  <p>The <kbd>t W</kbd> (<code>calc-new-week</code>)
  [<code>newweek</code>] command computes a new pure date form that
  represents the Sunday on or before the input date. With a numeric
  prefix argument, it can be made to use any day of the week as the
  starting day; the argument must be in the range from 0 (Sunday)
  to 6 (Saturday). This function always subtracts between 0 and 6
  days from the input date.</p>

  <p>Here&rsquo;s an example use of <code>newweek</code>: Find the
  date of the next Wednesday after a given date. Using <kbd>M-3 t
  W</kbd> or &lsquo;<samp>newweek(d, 3)</samp>&rsquo; will give you
  the <em>preceding</em> Wednesday, so &lsquo;<samp>newweek(d+7,
  3)</samp>&rsquo; will give you the following Wednesday. A further
  look at the definition of <code>newweek</code> shows that if the
  input date is itself a Wednesday, this formula will return the
  Wednesday one week in the future. An exercise for the reader is
  to modify this formula to yield the same day if the input is
  already a Wednesday. Another interesting exercise is to preserve
  the time-of-day portion of the input (<code>newweek</code> resets
  the time to midnight; hint: how can <code>newweek</code> be
  defined in terms of the <code>weekday</code>
  function?).</p><a name="index-pwday" id="index-pwday"></a>

  <p>The &lsquo;<samp>pwday(<var>date</var>)</samp>&rsquo; function
  (not on any key) computes the day-of-month number of the Sunday
  on or before <var>date</var>. With two arguments,
  &lsquo;<samp>pwday(<var>date</var>, <var>day</var>)</samp>&rsquo;
  computes the day number of the Sunday on or before day number
  <var>day</var> of the month specified by <var>date</var>. The
  <var>day</var> must be in the range from 7 to 31; if the day
  number is greater than the actual number of days in the month,
  the true number of days is used instead. Thus
  &lsquo;<samp>pwday(<var>date</var>, 7)</samp>&rsquo; finds the
  first Sunday of the month, and
  &lsquo;<samp>pwday(<var>date</var>, 31)</samp>&rsquo; finds the
  last Sunday of the month. With a third <var>weekday</var>
  argument, <code>pwday</code> can be made to look for any day of
  the week instead of Sunday.</p><a name="index-t-I" id=
  "index-t-I"></a> <a name="index-calc_002dinc_002dmonth" id=
  "index-calc_002dinc_002dmonth"></a> <a name="index-incmonth" id=
  "index-incmonth"></a>

  <p>The <kbd>t I</kbd> (<code>calc-inc-month</code>)
  [<code>incmonth</code>] command increases a date form by one
  month, or by an arbitrary number of months specified by a numeric
  prefix argument. The time portion, if any, of the date form stays
  the same. The day also stays the same, except that if the new
  month has fewer days the day number may be reduced to lie in the
  valid range. For example, &lsquo;<samp>incmonth(&lt;Jan 31,
  1991&gt;)</samp>&rsquo; produces &lsquo;<samp>&lt;Feb 28,
  1991&gt;</samp>&rsquo;. Because of this, <kbd>t I t I</kbd> and
  <kbd>M-2 t I</kbd> do not always give the same results
  (&lsquo;<samp>&lt;Mar 28, 1991&gt;</samp>&rsquo; versus
  &lsquo;<samp>&lt;Mar 31, 1991&gt;</samp>&rsquo; in this
  case).</p><a name="index-incyear" id="index-incyear"></a>

  <p>The &lsquo;<samp>incyear(<var>date</var>,
  <var>step</var>)</samp>&rsquo; function increases a date form by
  the specified number of years, which may be any positive or
  negative integer. Note that &lsquo;<samp>incyear(d,
  n)</samp>&rsquo; is equivalent to
  &lsquo;<samp>incmonth(d,&nbsp;12*n)</samp>&rsquo;<!-- /@w -->,
  but these do not have simple equivalents in terms of day
  arithmetic because months and years have varying lengths. If the
  <var>step</var> argument is omitted, 1 year is assumed. There is
  no keyboard command for this function; use <kbd>C-u 12 t I</kbd>
  instead.</p>

  <p>There is no <code>newday</code> function at all because
  <kbd>F</kbd> [<code>floor</code>] serves this purpose. Similarly,
  instead of <code>incday</code> and <code>incweek</code> simply
  use &lsquo;<samp>d + n</samp>&rsquo; or &lsquo;<samp>d + 7
  n</samp>&rsquo;.</p>

  <p>See <a href="Basic-Arithmetic.html#Basic-Arithmetic">Basic
  Arithmetic</a>, for the <kbd>f ]</kbd> [<code>incr</code>]
  command which can adjust a date/time form by a certain number of
  seconds.</p>
  <hr />

  <div class="header">
    <p>Next: <a href="Business-Days.html#Business-Days" accesskey=
    "n" rel="next">Business Days</a>, Previous: <a href=
    "Date-Conversions.html#Date-Conversions" accesskey="p" rel=
    "prev">Date Conversions</a>, Up: <a href=
    "Date-Arithmetic.html#Date-Arithmetic" accesskey="u" rel=
    "up">Date Arithmetic</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
