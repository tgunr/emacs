<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: Grabbing From Buffers</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: Grabbing From Buffers" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: Grabbing From Buffers" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Kill-and-Yank.html#Kill-and-Yank" rel="up" title=
  "Kill and Yank" />
  <link href="Yanking-Into-Buffers.html#Yanking-Into-Buffers" rel=
  "next" title="Yanking Into Buffers" />
  <link href=
  "Inserting-From-Registers.html#Inserting-From-Registers" rel=
  "prev" title="Inserting From Registers" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Grabbing-From-Buffers" id="Grabbing-From-Buffers"></a>

  <div class="header">
    <p>Next: <a href=
    "Yanking-Into-Buffers.html#Yanking-Into-Buffers" accesskey="n"
    rel="next">Yanking Into Buffers</a>, Previous: <a href=
    "Inserting-From-Registers.html#Inserting-From-Registers"
    accesskey="p" rel="prev">Inserting From Registers</a>, Up:
    <a href="Kill-and-Yank.html#Kill-and-Yank" accesskey="u" rel=
    "up">Kill and Yank</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Grabbing-from-Other-Buffers" id=
  "Grabbing-from-Other-Buffers"></a>

  <h3 class="section">14.5 Grabbing from Other Buffers</h3><a name=
  "index-C_002dx-_002a-g" id="index-C_002dx-_002a-g"></a> <a name=
  "index-calc_002dgrab_002dregion" id=
  "index-calc_002dgrab_002dregion"></a>

  <p>The <kbd>C-x * g</kbd> (<code>calc-grab-region</code>) command
  takes the text between point and mark in the current buffer and
  attempts to parse it as a vector of values. Basically, it wraps
  the text in vector brackets &lsquo;<samp>[ ]</samp>&rsquo; unless
  the text already is enclosed in vector brackets, then reads the
  text as if it were an algebraic entry. The contents of the vector
  may be numbers, formulas, or any other Calc objects. If the
  <kbd>C-x * g</kbd> command works successfully, it does an
  automatic <kbd>C-x * c</kbd> to enter the Calculator buffer.</p>

  <p>A numeric prefix argument grabs the specified number of lines
  around point, ignoring the mark. A positive prefix grabs from
  point to the &lsquo;<samp>n</samp>&rsquo;th following newline (so
  that <kbd>M-1 C-x * g</kbd> grabs from point to the end of the
  current line); a negative prefix grabs from point back to the
  &lsquo;<samp>n+1</samp>&rsquo;st preceding newline. In these
  cases the text that is grabbed is exactly the same as the text
  that <kbd>C-k</kbd> would delete given that prefix argument.</p>

  <p>A prefix of zero grabs the current line; point may be anywhere
  on the line.</p>

  <p>A plain <kbd>C-u</kbd> prefix interprets the region between
  point and mark as a single number or formula rather than a
  vector. For example, <kbd>C-x * g</kbd> on the text
  &lsquo;<samp>2 a b</samp>&rsquo; produces the vector of three
  values &lsquo;<samp>[2, a, b]</samp>&rsquo;, but <kbd>C-u C-x *
  g</kbd> on the same region reads a formula which is a product of
  three things: &lsquo;<samp>2 a b</samp>&rsquo;. (The text
  &lsquo;<samp>a + b</samp>&rsquo;, on the other hand, will be
  grabbed as a vector of one element by plain <kbd>C-x * g</kbd>
  because the interpretation &lsquo;<samp>[a, +, b]</samp>&rsquo;
  would be a syntax error.)</p>

  <p>If a different language has been specified (see <a href=
  "Language-Modes.html#Language-Modes">Language Modes</a>), the
  grabbed text will be interpreted according to that
  language.</p><a name="index-C_002dx-_002a-r" id=
  "index-C_002dx-_002a-r"></a> <a name=
  "index-calc_002dgrab_002drectangle" id=
  "index-calc_002dgrab_002drectangle"></a>

  <p>The <kbd>C-x * r</kbd> (<code>calc-grab-rectangle</code>)
  command takes the text between point and mark and attempts to
  parse it as a matrix. If point and mark are both in the leftmost
  column, the lines in between are parsed in their entirety.
  Otherwise, point and mark define the corners of a rectangle whose
  contents are parsed.</p>

  <p>Each line of the grabbed area becomes a row of the matrix. The
  result will actually be a vector of vectors, which Calc will
  treat as a matrix only if every row contains the same number of
  values.</p>

  <p>If a line contains a portion surrounded by square brackets (or
  curly braces), that portion is interpreted as a vector which
  becomes a row of the matrix. Any text surrounding the bracketed
  portion on the line is ignored.</p>

  <p>Otherwise, the entire line is interpreted as a row vector as
  if it were surrounded by square brackets. Leading line numbers
  (in the format used in the Calc stack buffer) are ignored. If you
  wish to force this interpretation (even if the line contains
  bracketed portions), give a negative numeric prefix argument to
  the <kbd>C-x * r</kbd> command.</p>

  <p>If you give a numeric prefix argument of zero or plain
  <kbd>C-u</kbd>, each line is instead interpreted as a single
  formula which is converted into a one-element vector. Thus the
  result of <kbd>C-u C-x * r</kbd> will be a one-column matrix. For
  example, suppose one line of the data is the expression
  &lsquo;<samp>2 a</samp>&rsquo;. A plain <kbd><span class=
  "nolinebreak">C-x</span>&nbsp;*&nbsp;r</kbd><!-- /@w --> will
  interpret this as &lsquo;<samp>[2 a]</samp>&rsquo;, which in turn
  is read as a two-element vector that forms one row of the matrix.
  But a <kbd>C-u C-x * r</kbd> will interpret this row as
  &lsquo;<samp>[2*a]</samp>&rsquo;.</p>

  <p>If you give a positive numeric prefix argument <var>n</var>,
  then each line will be split up into columns of width
  <var>n</var>; each column is parsed separately as a matrix
  element. If a line contained &lsquo;<samp>2&nbsp;<span class=
  "nolinebreak">+/-</span>&nbsp;3&nbsp;4&nbsp;<span class=
  "nolinebreak">+/-</span>&nbsp;5</samp>&rsquo;<!-- /@w -->, then
  grabbing with a prefix argument of 8 would correctly split the
  line into two error forms.</p>

  <p>See <a href="Matrix-Functions.html#Matrix-Functions">Matrix
  Functions</a>, to see how to pull the matrix apart into its
  constituent rows and columns. (If it is a 1x1 matrix, just hit
  <kbd>v u</kbd> (<code>calc-unpack</code>) twice.)</p><a name=
  "index-C_002dx-_002a-_003a" id="index-C_002dx-_002a-_003a"></a>
  <a name="index-C_002dx-_002a-_005f" id=
  "index-C_002dx-_002a-_005f"></a> <a name=
  "index-calc_002dgrab_002dsum_002dacross" id=
  "index-calc_002dgrab_002dsum_002dacross"></a> <a name=
  "index-calc_002dgrab_002dsum_002ddown" id=
  "index-calc_002dgrab_002dsum_002ddown"></a> <a name=
  "index-Summing-rows-and-columns-of-data" id=
  "index-Summing-rows-and-columns-of-data"></a>

  <p>The <kbd>C-x * :</kbd> (<code>calc-grab-sum-down</code>)
  command is a handy way to grab a rectangle of data and sum its
  columns. It is equivalent to typing <kbd>C-x * r</kbd>, followed
  by <kbd>V R : +</kbd> (the vector reduction command that sums the
  columns of a matrix; see <a href=
  "Reducing.html#Reducing">Reducing</a>). The result of the command
  will be a vector of numbers, one for each column in the input
  data. The <kbd>C-x * _</kbd> (<code>calc-grab-sum-across</code>)
  command similarly grabs a rectangle and sums its rows by
  executing <kbd>V&nbsp;R&nbsp;<span class=
  "nolinebreak">_</span>&nbsp;+</kbd><!-- /@w -->.</p>

  <p>As well as being more convenient, <kbd>C-x * :</kbd> and
  <kbd>C-x * _</kbd> are also much faster because they don&rsquo;t
  actually place the grabbed vector on the stack. In a <kbd>C-x * r
  V R : +</kbd> sequence, formatting the vector for display on the
  stack takes a large fraction of the total time (unless you have
  planned ahead and used <kbd>v .</kbd> and <kbd>t .</kbd>
  modes).</p>

  <p>For example, suppose we have a column of numbers in a file
  which we wish to sum. Go to one corner of the column and press
  <kbd>C-@</kbd> to set the mark; go to the other corner and type
  <kbd>C-x * :</kbd>. Since there is only one column, the result
  will be a vector of one number, the sum. (You can type <kbd>v
  u</kbd> to unpack this vector into a plain number if you want to
  do further arithmetic with it.)</p>

  <p>To compute the product of the column of numbers, we would have
  to do it &ldquo;by hand&rdquo; since there&rsquo;s no special
  grab-and-multiply command. Use <kbd>C-x * r</kbd> to grab the
  column of numbers into the calculator in the form of a column
  matrix. The statistics command <kbd>u *</kbd> is a handy way to
  find the product of a vector or matrix of numbers. See <a href=
  "Statistical-Operations.html#Statistical-Operations">Statistical
  Operations</a>. Another approach would be to use an explicit
  column reduction command, <kbd>V R : *</kbd>.</p>
  <hr />

  <div class="header">
    <p>Next: <a href=
    "Yanking-Into-Buffers.html#Yanking-Into-Buffers" accesskey="n"
    rel="next">Yanking Into Buffers</a>, Previous: <a href=
    "Inserting-From-Registers.html#Inserting-From-Registers"
    accesskey="p" rel="prev">Inserting From Registers</a>, Up:
    <a href="Kill-and-Yank.html#Kill-and-Yank" accesskey="u" rel=
    "up">Kill and Yank</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
