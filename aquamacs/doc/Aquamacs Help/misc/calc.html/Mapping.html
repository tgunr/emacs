<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: Mapping</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: Mapping" />
  <meta name="keywords" content="GNU Emacs Calc Manual: Mapping" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Reducing-and-Mapping.html#Reducing-and-Mapping" rel=
  "up" title="Reducing and Mapping" />
  <link href="Reducing.html#Reducing" rel="next" title=
  "Reducing" />
  <link href="Specifying-Operators.html#Specifying-Operators" rel=
  "prev" title="Specifying Operators" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Mapping" id="Mapping"></a>

  <div class="header">
    <p>Next: <a href="Reducing.html#Reducing" accesskey="n" rel=
    "next">Reducing</a>, Previous: <a href=
    "Specifying-Operators.html#Specifying-Operators" accesskey="p"
    rel="prev">Specifying Operators</a>, Up: <a href=
    "Reducing-and-Mapping.html#Reducing-and-Mapping" accesskey="u"
    rel="up">Reducing and Mapping</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Mapping-1" id="Mapping-1"></a>

  <h4 class="subsection">9.8.2 Mapping</h4><a name="index-v-M" id=
  "index-v-M"></a> <a name="index-V-M" id="index-V-M"></a> <a name=
  "index-calc_002dmap" id="index-calc_002dmap"></a> <a name=
  "index-map" id="index-map"></a>

  <p>The <kbd>V M</kbd> (<code>calc-map</code>) [<code>map</code>]
  command applies a given operator elementwise to one or more
  vectors. For example, mapping <code>A</code> [<code>abs</code>]
  produces a vector of the absolute values of the elements in the
  input vector. Mapping <code>+</code> pops two vectors from the
  stack, which must be of equal length, and produces a vector of
  the pairwise sums of the elements. If either argument is a
  non-vector, it is duplicated for each element of the other
  vector. For example, <kbd>[1,2,3] 2 V M ^</kbd> squares the
  elements of the specified vector. With the 2 listed first, it
  would have computed a vector of powers of two. Mapping a
  user-defined function pops as many arguments from the stack as
  the function requires. If you give an undefined name, you will be
  prompted for the number of arguments to use.</p>

  <p>If any argument to <kbd>V M</kbd> is a matrix, the operator is
  normally mapped across all elements of the matrix. For example,
  given the matrix &lsquo;<samp>[[1, -2, 3], [-4, 5,
  -6]]</samp>&rsquo;, <kbd>V M A</kbd> takes six absolute values to
  produce another 3x2 matrix, &lsquo;<samp>[[1, 2, 3], [4, 5,
  6]]</samp>&rsquo;.</p><a name="index-mapr" id="index-mapr"></a>

  <p>The command <kbd>V M _</kbd> [<code>mapr</code>] (i.e., type
  an underscore at the operator prompt) maps by rows instead. For
  example, <kbd>V M _ A</kbd> views the above matrix as a vector of
  two 3-element row vectors. It produces a new vector which
  contains the absolute values of those row vectors, namely
  &lsquo;<samp>[3.74, 8.77]</samp>&rsquo;. (Recall, the absolute
  value of a vector is defined as the square root of the sum of the
  squares of the elements.) Some operators accept vectors and
  return new vectors; for example, <kbd>v v</kbd> reverses a
  vector, so <kbd>V M _ v v</kbd> would reverse each row of the
  matrix to get a new matrix, &lsquo;<samp>[[3, -2, 1], [-6, 5,
  -4]]</samp>&rsquo;.</p>

  <p>Sometimes a vector of vectors (representing, say, strings,
  sets, or lists) happens to look like a matrix. If so, remember to
  use <kbd>V M _</kbd> if you want to map a function across the
  whole strings or sets rather than across their individual
  elements.</p><a name="index-mapc" id="index-mapc"></a>

  <p>The command <kbd>V M :</kbd> [<code>mapc</code>] maps by
  columns. Basically, it transposes the input matrix, maps by rows,
  and then, if the result is a matrix, transposes again. For
  example, <kbd>V M : A</kbd> takes the absolute values of the
  three columns of the matrix, treating each as a 2-vector, and
  <kbd>V M : v v</kbd> reverses the columns to get the matrix
  &lsquo;<samp>[[-4, 5, -6], [1, -2, 3]]</samp>&rsquo;.</p>

  <p>(The symbols <kbd>_</kbd> and <kbd>:</kbd> were chosen because
  they had row-like and column-like appearances, and were not
  already taken by useful operators. Also, they appear shifted on
  most keyboards so they are easy to type after <kbd>V
  M</kbd>.)</p>

  <p>The <kbd>_</kbd> and <kbd>:</kbd> modifiers have no effect on
  arguments that are not matrices (so if none of the arguments are
  matrices, they have no effect at all). If some of the arguments
  are matrices and others are plain numbers, the plain numbers are
  held constant for all rows of the matrix (so that <kbd>2 V M _
  ^</kbd> squares every row of a matrix; squaring a vector takes a
  dot product of the vector with itself).</p>

  <p>If some of the arguments are vectors with the same lengths as
  the rows (for <kbd>V M _</kbd>) or columns (for <kbd>V M :</kbd>)
  of the matrix arguments, those vectors are also held constant for
  every row or column.</p>

  <p>Sometimes it is useful to specify another mapping command as
  the operator to use with <kbd>V M</kbd>. For example, <kbd>V M _
  V A +</kbd> applies <kbd>V A +</kbd> to each row of the input
  matrix, which in turn adds the two values on that row. If you
  give another vector-operator command as the operator for <kbd>V
  M</kbd>, it automatically uses map-by-rows mode if you
  don&rsquo;t specify otherwise; thus <kbd>V M V A +</kbd> is
  equivalent to <kbd>V M _ V A +</kbd>. (If you really want to
  map-by-elements another mapping command, you can use a
  triple-nested mapping command: <kbd>V M V M V A +</kbd> means to
  map <kbd>V M V A +</kbd> over the rows of the matrix; in turn,
  <kbd>V A +</kbd> is mapped over the elements of each
  row.)</p><a name="index-mapa" id="index-mapa"></a> <a name=
  "index-mapd" id="index-mapd"></a>

  <p>Previous versions of Calc had &ldquo;map across&rdquo; and
  &ldquo;map down&rdquo; modes that are now considered obsolete;
  the old &ldquo;map across&rdquo; is now simply <kbd>V M V
  A</kbd>, and &ldquo;map down&rdquo; is now <kbd>V M : V A</kbd>.
  The algebraic functions <code>mapa</code> and <code>mapd</code>
  are still supported, though. Note also that, while the old
  mapping modes were persistent (once you set the mode, it would
  apply to later mapping commands until you reset it), the new
  <kbd>:</kbd> and <kbd>_</kbd> modifiers apply only to the current
  mapping command. The default <kbd>V M</kbd> always means
  map-by-elements.</p>

  <p>See <a href=
  "Algebraic-Manipulation.html#Algebraic-Manipulation">Algebraic
  Manipulation</a>, for the <kbd>a M</kbd> command, which is like
  <kbd>V M</kbd> but for equations and inequalities instead of
  vectors. See <a href=
  "Storing-Variables.html#Storing-Variables">Storing Variables</a>,
  for the <kbd>s m</kbd> command which modifies a variable&rsquo;s
  stored value using a <kbd>V M</kbd>-like operator.</p>
  <hr />

  <div class="header">
    <p>Next: <a href="Reducing.html#Reducing" accesskey="n" rel=
    "next">Reducing</a>, Previous: <a href=
    "Specifying-Operators.html#Specifying-Operators" accesskey="p"
    rel="prev">Specifying Operators</a>, Up: <a href=
    "Reducing-and-Mapping.html#Reducing-and-Mapping" accesskey="u"
    rel="up">Reducing and Mapping</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
