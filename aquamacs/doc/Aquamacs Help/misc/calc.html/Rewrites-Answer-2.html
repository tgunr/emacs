<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: Rewrites Answer 2</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: Rewrites Answer 2" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: Rewrites Answer 2" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Answers-to-Exercises.html#Answers-to-Exercises" rel=
  "up" title="Answers to Exercises" />
  <link href="Rewrites-Answer-3.html#Rewrites-Answer-3" rel="next"
  title="Rewrites Answer 3" />
  <link href="Rewrites-Answer-1.html#Rewrites-Answer-1" rel="prev"
  title="Rewrites Answer 1" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Rewrites-Answer-2" id="Rewrites-Answer-2"></a>

  <div class="header">
    <p>Next: <a href="Rewrites-Answer-3.html#Rewrites-Answer-3"
    accesskey="n" rel="next">Rewrites Answer 3</a>, Previous:
    <a href="Rewrites-Answer-1.html#Rewrites-Answer-1" accesskey=
    "p" rel="prev">Rewrites Answer 1</a>, Up: <a href=
    "Answers-to-Exercises.html#Answers-to-Exercises" accesskey="u"
    rel="up">Answers to Exercises</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href="Key-Index.html#Key-Index"
    title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Rewrites-Tutorial-Exercise-2" id=
  "Rewrites-Tutorial-Exercise-2"></a>

  <h4 class="subsection">2.7.53 Rewrites Tutorial Exercise 2</h4>

  <p>Here is the rule set:</p>

  <div class="smallexample">
    <pre class="smallexample">
[ fib(n) := fib(n, 1, 1) :: integer(n) :: n &gt;= 1,
  fib(1, x, y) := x,
  fib(n, x, y) := fib(n-1, y, x+y) ]
</pre>
  </div>

  <p>The first rule turns a one-argument <code>fib</code> that
  people like to write into a three-argument <code>fib</code> that
  makes computation easier. The second rule converts back from
  three-argument form once the computation is done. The third rule
  does the computation itself. It basically says that if
  &lsquo;<samp>x</samp>&rsquo; and &lsquo;<samp>y</samp>&rsquo; are
  two consecutive Fibonacci numbers, then
  &lsquo;<samp>y</samp>&rsquo; and &lsquo;<samp>x+y</samp>&rsquo;
  are the next (overlapping) pair of Fibonacci numbers.</p>

  <p>Notice that because the number &lsquo;<samp>n</samp>&rsquo;
  was &ldquo;validated&rdquo; by the conditions on the first rule,
  there is no need to put conditions on the other rules because the
  rule set would never get that far unless the input were valid.
  That further speeds computation, since no extra conditions need
  to be checked at every step.</p>

  <p>Actually, a user with a nasty sense of humor could enter a bad
  three-argument <code>fib</code> call directly, say,
  &lsquo;<samp>fib(0, 1, 1)</samp>&rsquo;, which would get the
  rules into an infinite loop. One thing that would help keep this
  from happening by accident would be to use something like
  &lsquo;<samp>ZzFib</samp>&rsquo; instead of <code>fib</code> as
  the name of the three-argument function.</p>
</body>
</html>
