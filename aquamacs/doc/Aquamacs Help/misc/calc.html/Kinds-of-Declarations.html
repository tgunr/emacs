<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file documents Calc, the GNU Emacs calculator, included with
GNU Emacs 25.1.

Copyright (C) 1990-1991, 2001-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being just "GNU GENERAL PUBLIC LICENSE", with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>GNU Emacs Calc Manual: Kinds of Declarations</title>
  <meta name="description" content=
  "GNU Emacs Calc Manual: Kinds of Declarations" />
  <meta name="keywords" content=
  "GNU Emacs Calc Manual: Kinds of Declarations" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="Declarations.html#Declarations" rel="up" title=
  "Declarations" />
  <link href=
  "Functions-for-Declarations.html#Functions-for-Declarations" rel=
  "next" title="Functions for Declarations" />
  <link href="Declaration-Basics.html#Declaration-Basics" rel=
  "prev" title="Declaration Basics" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Kinds-of-Declarations" id="Kinds-of-Declarations"></a>

  <div class="header">
    <p>Next: <a href=
    "Functions-for-Declarations.html#Functions-for-Declarations"
    accesskey="n" rel="next">Functions for Declarations</a>,
    Previous: <a href="Declaration-Basics.html#Declaration-Basics"
    accesskey="p" rel="prev">Declaration Basics</a>, Up: <a href=
    "Declarations.html#Declarations" accesskey="u" rel=
    "up">Declarations</a> &nbsp; [<a href="index.html#SEC_Contents"
    title="Table of contents" rel="contents">Contents</a>][<a href=
    "Key-Index.html#Key-Index" title="Index" rel=
    "index">Index</a>]</p>
  </div>
  <hr />
  <a name="Kinds-of-Declarations-1" id=
  "Kinds-of-Declarations-1"></a>

  <h4 class="subsection">6.6.2 Kinds of Declarations</h4>

  <p>The type-specifier part of a declaration (that is, the second
  prompt in the <kbd>s d</kbd> command) can be a type symbol, an
  interval, or a vector consisting of zero or more type symbols
  followed by zero or more intervals or numbers that represent the
  set of possible values for the variable.</p>

  <div class="smallexample">
    <pre class="smallexample">
[ [ a, [1, 2, 3, 4, 5] ]
  [ b, [1 .. 5]        ]
  [ c, [int, 1 .. 5]   ] ]
</pre>
  </div>

  <p>Here <code>a</code> is declared to contain one of the five
  integers shown; <code>b</code> is any number in the interval from
  1 to 5 (any real number since we haven&rsquo;t specified), and
  <code>c</code> is any integer in that interval. Thus the
  declarations for <code>a</code> and <code>c</code> are nearly
  equivalent (see below).</p>

  <p>The type-specifier can be the empty vector
  &lsquo;<samp>[]</samp>&rsquo; to say that nothing is known about
  a given variable&rsquo;s value. This is the same as not declaring
  the variable at all except that it overrides any <code>All</code>
  declaration which would otherwise apply.</p>

  <p>The initial value of <code>Decls</code> is the empty vector
  &lsquo;<samp>[]</samp>&rsquo;. If <code>Decls</code> has no
  stored value or if the value stored in it is not valid, it is
  ignored and there are no declarations as far as Calc is
  concerned. (The <kbd>s d</kbd> command will replace such a
  malformed value with a fresh empty matrix,
  &lsquo;<samp>[]</samp>&rsquo;, before recording the new
  declaration.) Unrecognized type symbols are ignored.</p>

  <p>The following type symbols describe what sorts of numbers will
  be stored in a variable:</p>

  <dl compact="compact">
    <dt><code>int</code></dt>

    <dd>
      <p>Integers.</p>
    </dd>

    <dt><code>numint</code></dt>

    <dd>
      <p>Numerical integers. (Integers or integer-valued
      floats.)</p>
    </dd>

    <dt><code>frac</code></dt>

    <dd>
      <p>Fractions. (Rational numbers which are not integers.)</p>
    </dd>

    <dt><code>rat</code></dt>

    <dd>
      <p>Rational numbers. (Either integers or fractions.)</p>
    </dd>

    <dt><code>float</code></dt>

    <dd>
      <p>Floating-point numbers.</p>
    </dd>

    <dt><code>real</code></dt>

    <dd>
      <p>Real numbers. (Integers, fractions, or floats. Actually,
      intervals and error forms with real components also count as
      reals here.)</p>
    </dd>

    <dt><code>pos</code></dt>

    <dd>
      <p>Positive real numbers. (Strictly greater than zero.)</p>
    </dd>

    <dt><code>nonneg</code></dt>

    <dd>
      <p>Nonnegative real numbers. (Greater than or equal to
      zero.)</p>
    </dd>

    <dt><code>number</code></dt>

    <dd>
      <p>Numbers. (Real or complex.)</p>
    </dd>
  </dl>

  <p>Calc uses this information to determine when certain
  simplifications of formulas are safe. For example,
  &lsquo;<samp>(x^y)^z</samp>&rsquo; cannot be simplified to
  &lsquo;<samp>x^(y z)</samp>&rsquo; in general; for example,
  &lsquo;<samp>((-3)^2)^1:2</samp>&rsquo; is 3, but
  &lsquo;<samp>(-3)^(2*1:2) = (-3)^1</samp>&rsquo; is <i>-3</i>.
  However, this simplification <em>is</em> safe if <code>z</code>
  is known to be an integer, or if <code>x</code> is known to be a
  nonnegative real number. If you have given declarations that
  allow Calc to deduce either of these facts, Calc will perform
  this simplification of the formula.</p>

  <p>Calc can apply a certain amount of logic when using
  declarations. For example,
  &lsquo;<samp>(x^y)^(2n+1)</samp>&rsquo; will be simplified if
  <code>n</code> has been declared <code>int</code>; Calc knows
  that an integer times an integer, plus an integer, must always be
  an integer. (In fact, Calc would simplify
  &lsquo;<samp>(-x)^(2n+1)</samp>&rsquo; to
  &lsquo;<samp>-(x^(2n+1))</samp>&rsquo; since it is able to
  determine that &lsquo;<samp>2n+1</samp>&rsquo; must be an odd
  integer.)</p>

  <p>Similarly, &lsquo;<samp>(abs(x)^y)^z</samp>&rsquo; will be
  simplified to &lsquo;<samp>abs(x)^(y z)</samp>&rsquo; because
  Calc knows that the <code>abs</code> function always returns a
  nonnegative real. If you had a <code>myabs</code> function that
  also had this property, you could get Calc to recognize it by
  adding the row &lsquo;<samp>[myabs(), nonneg]</samp>&rsquo; to
  the <code>Decls</code> matrix.</p>

  <p>One instance of this simplification is
  &lsquo;<samp>sqrt(x^2)</samp>&rsquo; (since the <code>sqrt</code>
  function is effectively a one-half power). Normally Calc leaves
  this formula alone. After the command <kbd>s d x <span class=
  "key">RET</span> real <span class="key">RET</span></kbd>,
  however, it can simplify the formula to
  &lsquo;<samp>abs(x)</samp>&rsquo;. And after <kbd>s d x
  <span class="key">RET</span> nonneg <span class=
  "key">RET</span></kbd>, Calc can simplify this formula all the
  way to &lsquo;<samp>x</samp>&rsquo;.</p>

  <p>If there are any intervals or real numbers in the type
  specifier, they comprise the set of possible values that the
  variable or function being declared can have. In particular, the
  type symbol <code>real</code> is effectively the same as the
  range &lsquo;<samp>[-inf .. inf]</samp>&rsquo; (note that
  infinity is included in the range of possible values);
  <code>pos</code> is the same as &lsquo;<samp>(0 ..
  inf]</samp>&rsquo;, and <code>nonneg</code> is the same as
  &lsquo;<samp>[0 .. inf]</samp>&rsquo;. Saying &lsquo;<samp>[real,
  [-5 .. 5]]</samp>&rsquo; is redundant because the fact that the
  variable is real can be deduced just from the interval, but
  &lsquo;<samp>[int, [-5 .. 5]]</samp>&rsquo; and
  &lsquo;<samp>[rat, [-5 .. 5]]</samp>&rsquo; are useful
  combinations.</p>

  <p>Note that the vector of intervals or numbers is in the same
  format used by Calc&rsquo;s set-manipulation commands. See
  <a href="Set-Operations.html#Set-Operations">Set
  Operations</a>.</p>

  <p>The type specifier &lsquo;<samp>[1, 2, 3]</samp>&rsquo; is
  equivalent to &lsquo;<samp>[numint, 1, 2, 3]</samp>&rsquo;,
  <em>not</em> to &lsquo;<samp>[int, 1, 2, 3]</samp>&rsquo;. In
  other words, the range of possible values means only that the
  variable&rsquo;s value must be numerically equal to a number in
  that range, but not that it must be equal in type as well.
  Calc&rsquo;s set operations act the same way; &lsquo;<samp>in(2,
  [1., 2., 3.])</samp>&rsquo; and &lsquo;<samp>in(1.5, [1:2, 3:2,
  5:2])</samp>&rsquo; both report &ldquo;true.&rdquo;</p>

  <p>If you use a conflicting combination of type specifiers, the
  results are unpredictable. An example is &lsquo;<samp>[pos, [0 ..
  5]]</samp>&rsquo;, where the interval does not lie in the range
  described by the type symbol.</p>

  <p>&ldquo;Real&rdquo; declarations mostly affect simplifications
  involving powers like the one described above. Another case where
  they are used is in the <kbd>a P</kbd> command which returns a
  list of all roots of a polynomial; if the variable has been
  declared real, only the real roots (if any) will be included in
  the list.</p>

  <p>&ldquo;Integer&rdquo; declarations are used for
  simplifications which are valid only when certain values are
  integers (such as &lsquo;<samp>(x^y)^z</samp>&rsquo; shown
  above).</p>

  <p>Calc&rsquo;s algebraic simplifications also make use of
  declarations when simplifying equations and inequalities. They
  will cancel <code>x</code> from both sides of &lsquo;<samp>a x =
  b x</samp>&rsquo; only if it is sure <code>x</code> is non-zero,
  say, because it has a <code>pos</code> declaration. To declare
  specifically that <code>x</code> is real and non-zero, use
  &lsquo;<samp>[[-inf .. 0), (0 .. inf]]</samp>&rsquo;. (There is
  no way in the current notation to say that <code>x</code> is
  nonzero but not necessarily real.) The <kbd>a e</kbd> command
  does &ldquo;unsafe&rdquo; simplifications, including canceling
  &lsquo;<samp>x</samp>&rsquo; from the equation when
  &lsquo;<samp>x</samp>&rsquo; is not known to be nonzero.</p>

  <p>Another set of type symbols distinguish between scalars and
  vectors.</p>

  <dl compact="compact">
    <dt><code>scalar</code></dt>

    <dd>
      <p>The value is not a vector.</p>
    </dd>

    <dt><code>vector</code></dt>

    <dd>
      <p>The value is a vector.</p>
    </dd>

    <dt><code>matrix</code></dt>

    <dd>
      <p>The value is a matrix (a rectangular vector of
      vectors).</p>
    </dd>

    <dt><code>sqmatrix</code></dt>

    <dd>
      <p>The value is a square matrix.</p>
    </dd>
  </dl>

  <p>These type symbols can be combined with the other type symbols
  described above; &lsquo;<samp>[int, matrix]</samp>&rsquo;
  describes an object which is a matrix of integers.</p>

  <p>Scalar/vector declarations are used to determine whether
  certain algebraic operations are safe. For example,
  &lsquo;<samp>[a, b, c] + x</samp>&rsquo; is normally not
  simplified to &lsquo;<samp>[a + x, b + x, c + x]</samp>&rsquo;,
  but it will be if <code>x</code> has been declared
  <code>scalar</code>. On the other hand, multiplication is usually
  assumed to be commutative, but the terms in &lsquo;<samp>x
  y</samp>&rsquo; will never be exchanged if both <code>x</code>
  and <code>y</code> are known to be vectors or matrices. (Calc
  currently never distinguishes between <code>vector</code> and
  <code>matrix</code> declarations.)</p>

  <p>See <a href="Matrix-Mode.html#Matrix-Mode">Matrix Mode</a>,
  for a discussion of Matrix mode and Scalar mode, which are
  similar to declaring &lsquo;<samp>[All, matrix]</samp>&rsquo; or
  &lsquo;<samp>[All, scalar]</samp>&rsquo; but much more
  convenient.</p>

  <p>One more type symbol that is recognized is used with the
  <kbd>H a d</kbd> command for taking total derivatives of a
  formula. See <a href="Calculus.html#Calculus">Calculus</a>.</p>

  <dl compact="compact">
    <dt><code>const</code></dt>

    <dd>
      <p>The value is a constant with respect to other
      variables.</p>
    </dd>
  </dl>

  <p>Calc does not check the declarations for a variable when you
  store a value in it. However, storing <i>-3.5</i> in a variable
  that has been declared <code>pos</code>, <code>int</code>, or
  <code>matrix</code> may have unexpected effects; Calc may
  evaluate &lsquo;<samp>sqrt(x^2)</samp>&rsquo; to
  &lsquo;<samp>3.5</samp>&rsquo; if it substitutes the value first,
  or to &lsquo;<samp>-3.5</samp>&rsquo; if <code>x</code> was
  declared <code>pos</code> and the formula
  &lsquo;<samp>sqrt(x^2)</samp>&rsquo; is simplified to
  &lsquo;<samp>x</samp>&rsquo; before the value is substituted.
  Before using a variable for a new purpose, it is best to use
  <kbd>s d</kbd> or <kbd>s D</kbd> to check to make sure you
  don&rsquo;t still have an old declaration for the variable that
  will conflict with its new meaning.</p>
  <hr />

  <div class="header">
    <p>Next: <a href=
    "Functions-for-Declarations.html#Functions-for-Declarations"
    accesskey="n" rel="next">Functions for Declarations</a>,
    Previous: <a href="Declaration-Basics.html#Declaration-Basics"
    accesskey="p" rel="prev">Declaration Basics</a>, Up: <a href=
    "Declarations.html#Declarations" accesskey="u" rel=
    "up">Declarations</a> &nbsp; [<a href="index.html#SEC_Contents"
    title="Table of contents" rel="contents">Contents</a>][<a href=
    "Key-Index.html#Key-Index" title="Index" rel=
    "index">Index</a>]</p>
  </div>
</body>
</html>
