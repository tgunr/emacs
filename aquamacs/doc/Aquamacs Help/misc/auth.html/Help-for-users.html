<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This file describes the Emacs auth-source library.

Copyright (C) 2008-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.  A copy of the license
is included in the section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>Emacs auth-source Library 0.3: Help for users</title>
  <meta name="description" content=
  "Emacs auth-source Library 0.3: Help for users" />
  <meta name="keywords" content=
  "Emacs auth-source Library 0.3: Help for users" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Index.html#Index" rel="index" title="Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="index.html#Top" rel="up" title="Top" />
  <link href=
  "Multiple-GMail-accounts-with-Gnus.html#Multiple-GMail-accounts-with-Gnus"
  rel="next" title="Multiple GMail accounts with Gnus" />
  <link href="Overview.html#Overview" rel="prev" title=
  "Overview" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Help-for-users" id="Help-for-users"></a>

  <div class="header">
    <p>Next: <a href=
    "Multiple-GMail-accounts-with-Gnus.html#Multiple-GMail-accounts-with-Gnus"
    accesskey="n" rel="next">Multiple GMail accounts with Gnus</a>,
    Previous: <a href="Overview.html#Overview" accesskey="p" rel=
    "prev">Overview</a>, Up: <a href="index.html#Top" accesskey="u"
    rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents"
    title="Table of contents" rel="contents">Contents</a>][<a href=
    "Index.html#Index" title="Index" rel="index">Index</a>]</p>
  </div>
  <hr />
  <a name="Help-for-users-1" id="Help-for-users-1"></a>

  <h2 class="chapter">2 Help for users</h2>

  <p>&ldquo;Netrc&rdquo; files are a de facto standard. They look
  like this:</p>

  <div class="example">
    <pre class="example">
machine <var>mymachine</var> login <var>myloginname</var> password <var>mypassword</var> port <var>myport</var>
</pre>
  </div>

  <p>The <code>machine</code> is the server (either a DNS name or
  an IP address). It&rsquo;s known as <var>:host</var> in
  <code>auth-source-search</code> queries. You can also use
  <code>host</code>.</p>

  <p>The <code>port</code> is the connection port or protocol.
  It&rsquo;s known as <var>:port</var> in
  <code>auth-source-search</code> queries.</p>

  <p>The <code>user</code> is the user name. It&rsquo;s known as
  <var>:user</var> in <code>auth-source-search</code> queries. You
  can also use <code>login</code> and <code>account</code>.</p>

  <p>You can use spaces inside a password or other token by
  surrounding the token with either single or double quotes.</p>

  <p>You can use apostrophes inside a password or other token by
  surrounding it with double quotes, e.g., <code>"he'llo"</code>.
  Similarly you can use double quotes inside a password or other
  token by surrounding it with apostrophes, e.g.,
  <code>'he"llo'</code>. You can&rsquo;t mix both (so a password or
  other token can&rsquo;t have both apostrophes and double
  quotes).</p>

  <p>All this is optional. You could just say (but we don&rsquo;t
  recommend it, we&rsquo;re just showing that it&rsquo;s
  possible)</p>

  <div class="example">
    <pre class="example">
password <var>mypassword</var>
</pre>
  </div>

  <p>to use the same password everywhere. Again, <em>DO NOT DO
  THIS</em> or you will be pwned as the kids say.</p>

  <p>&ldquo;Netrc&rdquo; files are usually called
  <samp>.authinfo</samp> or <samp>.netrc</samp>; nowadays
  <samp>.authinfo</samp> seems to be more popular and the
  auth-source library encourages this confusion by accepting both,
  as you&rsquo;ll see later.</p>

  <p>If you have problems with the search, set
  <code>auth-source-debug</code> to <code>'trivia</code> and see
  what host, port, and user the library is checking in the
  <samp>*Messages*</samp> buffer. Ditto for any other problems,
  your first step is always to see what&rsquo;s being checked. The
  second step, of course, is to write a blog entry about it and
  wait for the answer in the comments.</p>

  <p>You can customize the variable <code>auth-sources</code>. The
  following may be needed if you are using an older version of
  Emacs or if the auth-source library is not loaded for some other
  reason.</p>

  <div class="lisp">
    <pre class="lisp">
(require 'auth-source)             ;; probably not necessary
(customize-variable 'auth-sources) ;; optional, do it once
</pre>
  </div>

  <dl>
    <dt><a name="index-auth_002dsources" id=
    "index-auth_002dsources"></a>Variable:
    <strong>auth-sources</strong></dt>

    <dd>
      <p>The <code>auth-sources</code> variable tells the
      auth-source library where your netrc files or Secret Service
      API collection items live for a particular host and protocol.
      While you can get fancy, the default and simplest
      configuration is:</p>

      <div class="lisp">
        <pre class="lisp">
;;; old default: required :host and :port, not needed anymore
(setq auth-sources '((:source "~/.authinfo.gpg" :host t :port t)))
;;; mostly equivalent (see below about fallbacks) but shorter:
(setq auth-sources '((:source "~/.authinfo.gpg")))
;;; even shorter and the <em>default</em>:
(setq auth-sources '("~/.authinfo.gpg" "~/.authinfo" "~/.netrc"))
;;; use the Secrets API <var>Login</var> collection
;;; (see <a href=
"Secret-Service-API.html#Secret-Service-API">Secret Service API</a>)
(setq auth-sources '("secrets:Login"))
</pre>
      </div>

      <p>By adding multiple entries to <code>auth-sources</code>
      with a particular host or protocol, you can have specific
      netrc files for that host or protocol. Usually this is
      unnecessary but may make sense if you have shared netrc files
      or some other unusual setup (90% of Emacs users have unusual
      setups and the remaining 10% are <em>really</em>
      unusual).</p>

      <p>Here&rsquo;s a mixed example using two sources:</p>

      <div class="lisp">
        <pre class="lisp">
(setq auth-sources '((:source (:secrets default)
                      :host "myserver" :user "joe")
                     "~/.authinfo.gpg"))
</pre>
      </div>
    </dd>
  </dl>

  <p>If you don&rsquo;t customize <code>auth-sources</code>,
  you&rsquo;ll have to live with the defaults: the unencrypted
  netrc file <samp>~/.authinfo</samp> will be used for any host and
  any port.</p>

  <p>If that fails, any host and any port are looked up in the
  netrc file <samp>~/.authinfo.gpg</samp>, which is a GnuPG
  encrypted file (see <a href=
  "GnuPG-and-EasyPG-Assistant-Configuration.html#GnuPG-and-EasyPG-Assistant-Configuration">
  GnuPG and EasyPG Assistant Configuration</a>).</p>

  <p>Finally, the unencrypted netrc file <samp>~/.netrc</samp> will
  be used for any host and any port.</p>

  <p>The typical netrc line example is without a port.</p>

  <div class="example">
    <pre class="example">
machine YOURMACHINE login YOU password YOURPASSWORD
</pre>
  </div>

  <p>This will match any authentication port. Simple, right? But
  what if there&rsquo;s a SMTP server on port 433 of that machine
  that needs a different password from the IMAP server?</p>

  <div class="example">
    <pre class="example">
machine YOURMACHINE login YOU password SMTPPASSWORD port 433
machine YOURMACHINE login YOU password GENERALPASSWORD
</pre>
  </div>

  <p>For url-auth authentication (HTTP/HTTPS), you need to put this
  in your netrc file:</p>

  <div class="example">
    <pre class="example">
machine yourmachine.com:80 port http login testuser password testpass
</pre>
  </div>

  <p>This will match any realm and authentication method (basic or
  digest) over HTTP. HTTPS is set up similarly. If you want finer
  controls, explore the url-auth source code and variables.</p>

  <p>For Tramp authentication, use:</p>

  <div class="example">
    <pre class="example">
machine yourmachine.com port scp login testuser password testpass
</pre>
  </div>

  <p>Note that the port denotes the Tramp connection method. When
  you don&rsquo;t use a port entry, you match any Tramp method, as
  explained earlier. Since Tramp has about 88 connection methods,
  this may be necessary if you have an unusual (see earlier comment
  on those) setup.</p>
  <hr />

  <div class="header">
    <p>Next: <a href=
    "Multiple-GMail-accounts-with-Gnus.html#Multiple-GMail-accounts-with-Gnus"
    accesskey="n" rel="next">Multiple GMail accounts with Gnus</a>,
    Previous: <a href="Overview.html#Overview" accesskey="p" rel=
    "prev">Overview</a>, Up: <a href="index.html#Top" accesskey="u"
    rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents"
    title="Table of contents" rel="contents">Contents</a>][<a href=
    "Index.html#Index" title="Index" rel="index">Index</a>]</p>
  </div>
</body>
</html>
