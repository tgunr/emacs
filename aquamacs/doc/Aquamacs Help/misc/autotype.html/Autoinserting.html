<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Copyright (C) 1994-1995, 1999, 2001-2016
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being "A GNU Manual",
and with the Back-Cover Texts as in (a) below.  A copy of the license
is included in the section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>Features for Automatic Typing: Autoinserting</title>
  <meta name="description" content=
  "Features for Automatic Typing: Autoinserting" />
  <meta name="keywords" content=
  "Features for Automatic Typing: Autoinserting" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Concept-Index.html#Concept-Index" rel="index" title=
  "Concept Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="index.html#Top" rel="up" title="Top" />
  <link href="Copyrights.html#Copyrights" rel="next" title=
  "Copyrights" />
  <link href="Inserting-Pairs.html#Inserting-Pairs" rel="prev"
  title="Inserting Pairs" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Autoinserting" id="Autoinserting"></a>

  <div class="header">
    <p>Next: <a href="Copyrights.html#Copyrights" accesskey="n"
    rel="next">Copyrights</a>, Previous: <a href=
    "Inserting-Pairs.html#Inserting-Pairs" accesskey="p" rel=
    "prev">Inserting Pairs</a>, Up: <a href="index.html#Top"
    accesskey="u" rel="up">Top</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href=
    "Concept-Index.html#Concept-Index" title="Index" rel=
    "index">Index</a>]</p>
  </div>
  <hr />
  <a name="Autoinserting-Text-in-Empty-Files" id=
  "Autoinserting-Text-in-Empty-Files"></a>

  <h2 class="chapter">6 Autoinserting Text in Empty
  Files</h2><a name="index-autoinserting" id=
  "index-autoinserting"></a> <a name="index-auto_002dinsert" id=
  "index-auto_002dinsert"></a>

  <p><kbd>M-x auto-insert</kbd> will put some predefined text at
  the beginning of the buffer. The main application for this
  function, as its name suggests, is to have it be called
  automatically every time an empty, and only an empty file is
  visited. This is accomplished by putting <code>(add-hook
  'find-file-hook 'auto-insert)</code> into your
  <samp>~/.emacs</samp> file (see <a href=
  "http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html#Init-File">
  Init File</a> in <cite>The GNU Emacs Manual</cite>).</p><a name=
  "index-auto_002dinsert_002dalist" id=
  "index-auto_002dinsert_002dalist"></a>

  <p>What gets inserted, if anything, is determined by the variable
  <code>auto-insert-alist</code>. The <small>CAR</small>s of this
  list are each either a mode name, making an element applicable
  when a buffer is in that mode. Or they can be a string, which is
  a regexp matched against the buffer&rsquo;s file name. In that
  way different kinds of files that have the same mode in Emacs can
  be distinguished. The <small>CAR</small>s may also be cons cells
  consisting of mode name or regexp as above and an additional
  descriptive string.</p>

  <p>When a matching element is found, the <small>CDR</small> says
  what to do. It may be a string, which is a file name, whose
  contents are to be inserted, if that file is found in the
  directory <code>auto-insert-directory</code> or under a absolute
  file name. Or it can be a skeleton (see <a href=
  "Skeleton-Language.html#Skeleton-Language">Skeleton Language</a>)
  to be inserted.</p>

  <p>It can also be a function, which allows doing various things.
  The function can simply insert some text, indeed, it can be
  skeleton command (see <a href=
  "Using-Skeletons.html#Using-Skeletons">Using Skeletons</a>). It
  can be a lambda function which will for example conditionally
  call another function. Or it can even reset the mode for the
  buffer. If you want to perform several such actions in order, you
  use a vector, i.e., several of the above elements between square
  brackets (&lsquo;<samp>[<span class=
  "roman">&hellip;</span>]</samp>&rsquo;).</p>

  <p>By default C and C++ headers insert a definition of a symbol
  derived from the filename to prevent multiple inclusions. C and
  C++ sources insert an include of the header. Makefiles insert the
  file makefile.inc if it exists.</p>

  <p>TeX and bibTeX mode files insert the file tex-insert.tex if it
  exists, while LaTeX mode files insert a typical
  <code>\documentclass</code> frame. Html files insert a skeleton
  with the usual frame.</p>

  <p>Ada mode files call the Ada header skeleton command. Emacs
  lisp source files insert the usual header, with a copyright of
  your environment variable <code>$ORGANIZATION</code> or else the
  FSF, and prompt for valid keywords describing the contents. Files
  in a <samp>bin</samp> directory for which Emacs could determine
  no specialized mode (see <a href=
  "http://www.gnu.org/software/emacs/manual/html_node/emacs/Choosing-Modes.html#Choosing-Modes">
  Choosing Modes</a> in <cite>The GNU Emacs Manual</cite>) are set
  to Shell script mode.</p><a name=
  "index-define_002dauto_002dinsert" id=
  "index-define_002dauto_002dinsert"></a>

  <p>In Lisp (see <a href=
  "http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html#Init-File">
  Init File</a> in <cite>The GNU Emacs Manual</cite>) you can use
  the function <code>define-auto-insert</code> to add to or modify
  <code>auto-insert-alist</code>. See its documentation with
  <kbd>C-h f define-auto-insert</kbd>.</p><a name=
  "index-auto_002dinsert-1" id="index-auto_002dinsert-1"></a>

  <p>The variable <code>auto-insert</code> says what to do when
  <code>auto-insert</code> is called non-interactively, e.g., when
  a newly found file is empty (see above):</p>

  <dl compact="compact">
    <dt><code>nil</code></dt>

    <dd>
      <p>Do nothing.</p>
    </dd>

    <dt><code>t</code></dt>

    <dd>
      <p>Insert something if possible, i.e., there is a matching
      entry in <code>auto-insert-alist</code>.</p>
    </dd>

    <dt>other</dt>

    <dd>
      <p>Insert something if possible, but mark as unmodified.</p>
    </dd>
  </dl><a name="index-auto_002dinsert_002dquery" id=
  "index-auto_002dinsert_002dquery"></a>

  <p>The variable <code>auto-insert-query</code> controls whether
  to ask about inserting something. When this is <code>nil</code>,
  inserting is only done with <kbd>M-x auto-insert</kbd>. When this
  is <code>function</code>, you are queried whenever
  <code>auto-insert</code> is called as a function, such as when
  Emacs visits an empty file and you have set the above-mentioned
  hook. Otherwise you are always queried.</p><a name=
  "index-auto_002dinsert_002dprompt" id=
  "index-auto_002dinsert_002dprompt"></a>

  <p>When querying, the variable
  <code>auto-insert-prompt</code>&rsquo;s value is used as a prompt
  for a y-or-n-type question. If this includes a
  &lsquo;<samp>%s</samp>&rsquo; construct, that is replaced by what
  caused the insertion rule to be chosen. This is either a
  descriptive text, the mode-name of the buffer or the regular
  expression that matched the filename.</p>
  <hr />

  <div class="header">
    <p>Next: <a href="Copyrights.html#Copyrights" accesskey="n"
    rel="next">Copyrights</a>, Previous: <a href=
    "Inserting-Pairs.html#Inserting-Pairs" accesskey="p" rel=
    "prev">Inserting Pairs</a>, Up: <a href="index.html#Top"
    accesskey="u" rel="up">Top</a> &nbsp; [<a href=
    "index.html#SEC_Contents" title="Table of contents" rel=
    "contents">Contents</a>][<a href=
    "Concept-Index.html#Concept-Index" title="Index" rel=
    "index">Index</a>]</p>
  </div>
</body>
</html>
