<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- This is version 8.6 of The MH-E
Manual, last updated 2016-04-29.

Copyright (C) 1995, 2001-2003, 2005-2016 Free Software
Foundation, Inc.


Permission is granted to copy, distribute and/or modify this document
under the terms of either:

a. the GNU Free Documentation License, Version 1.3 or any later version
published by the Free Software Foundation; with no Invariant Sections,
with the Front-Cover Texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below. A copy of the license is included in
the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual."

b. the GNU General Public License as published by the Free Software
Foundation; either version 3, or (at your option) any later version. A
copy of the license is included in the section entitled "GNU General
Public License."
 -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->

<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>The MH-E Manual: Junk</title>
  <meta name="description" content="The MH-E Manual: Junk" />
  <meta name="keywords" content="The MH-E Manual: Junk" />
  <meta name="resource-type" content="document" />
  <meta name="distribution" content="global" />
  <meta name="Generator" content="makeinfo" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link href="index.html#Top" rel="start" title="Top" />
  <link href="Key-Index.html#Key-Index" rel="index" title=
  "Key Index" />
  <link href="index.html#SEC_Contents" rel="contents" title=
  "Table of Contents" />
  <link href="index.html#Top" rel="up" title="Top" />
  <link href="Miscellaneous.html#Miscellaneous" rel="next" title=
  "Miscellaneous" />
  <link href="Sequences.html#Sequences" rel="prev" title=
  "Sequences" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  a.summary-letter {text-decoration: none}
  blockquote.smallquotation {font-size: smaller}
  div.display {margin-left: 3.2em}
  div.example {margin-left: 3.2em}
  div.indentedblock {margin-left: 3.2em}
  div.lisp {margin-left: 3.2em}
  div.smalldisplay {margin-left: 3.2em}
  div.smallexample {margin-left: 3.2em}
  div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
  div.smalllisp {margin-left: 3.2em}
  kbd {font-style:oblique}
  pre.display {font-family: inherit}
  pre.format {font-family: inherit}
  pre.menu-comment {font-family: serif}
  pre.menu-preformatted {font-family: serif}
  pre.smalldisplay {font-family: inherit; font-size: smaller}
  pre.smallexample {font-size: smaller}
  pre.smallformat {font-family: inherit; font-size: smaller}
  pre.smalllisp {font-size: smaller}
  span.nocodebreak {white-space:nowrap}
  span.nolinebreak {white-space:nowrap}
  span.roman {font-family:serif; font-weight:normal}
  span.sansserif {font-family:sans-serif; font-weight:normal}
  ul.no-bullet {list-style: none}
  -->
  /*]]>*/
  </style>
  <style type="text/css">
/*<![CDATA[*/
  body {
  background-color: #FFFFFF;
  color: #000000;
  }
  :link { color: #0000FF }
  :visited { color: #800080 }
  :active { color: #FF0000 }
  /*]]>*/
  </style>
</head>

<body lang="en" xml:lang="en">
  <a name="Junk" id="Junk"></a>

  <div class="header">
    <p>Next: <a href="Miscellaneous.html#Miscellaneous" accesskey=
    "n" rel="next">Miscellaneous</a>, Previous: <a href=
    "Sequences.html#Sequences" accesskey="p" rel=
    "prev">Sequences</a>, Up: <a href="index.html#Top" accesskey=
    "u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents"
    title="Table of contents" rel="contents">Contents</a>][<a href=
    "Key-Index.html#Key-Index" title="Index" rel=
    "index">Index</a>]</p>
  </div>
  <hr />
  <a name="Dealing-With-Junk-Mail" id="Dealing-With-Junk-Mail"></a>

  <h2 class="chapter">19 Dealing With Junk Mail</h2><a name=
  "index-Marshall-Rose" id="index-Marshall-Rose"></a> <a name=
  "index-junk-mail-1" id="index-junk-mail-1"></a> <a name=
  "index-spam-1" id="index-spam-1"></a>

  <p>Marshall Rose once wrote a paper on MH entitled, <cite>How to
  process 200 messages a day and still get some real work
  done</cite>. This chapter could be entitled, <cite>How to process
  1000 spams a day and still get some real work
  done</cite>.</p><a name="index-blacklisting" id=
  "index-blacklisting"></a> <a name="index-ham" id="index-ham"></a>
  <a name="index-viruses" id="index-viruses"></a> <a name=
  "index-whitelisting" id="index-whitelisting"></a> <a name=
  "index-worms" id="index-worms"></a>

  <p>We use the terms <em>junk mail</em> and <em>spam</em>
  interchangeably for any unwanted message which includes spam,
  <em>viruses</em>, and <em>worms</em>. The opposite of spam is
  <em>ham</em>. The act of classifying a sender as one who sends
  junk mail is called <em>blacklisting</em>; the opposite is called
  <em>whitelisting</em>.</p>

  <dl compact="compact">
    <dd><a name="index-J-_003f" id="index-J-_003f"></a> <a name=
    "index-mh_002dprefix_002dhelp-8" id=
    "index-mh_002dprefix_002dhelp-8"></a></dd>

    <dt><kbd>J ?</kbd></dt>

    <dd>
      <p>Display cheat sheet for the commands of the current prefix
      in minibuffer (<code>mh-prefix-help</code>). <a name=
      "index-J-b" id="index-J-b"></a> <a name=
      "index-mh_002djunk_002dblacklist" id=
      "index-mh_002djunk_002dblacklist"></a></p>
    </dd>

    <dt><kbd>J b</kbd></dt>

    <dd>
      <p>Blacklist range as spam (<code>mh-junk-blacklist</code>).
      <a name="index-J-w" id="index-J-w"></a> <a name=
      "index-mh_002djunk_002dwhitelist" id=
      "index-mh_002djunk_002dwhitelist"></a></p>
    </dd>

    <dt><kbd>J w</kbd></dt>

    <dd>
      <p>Whitelist range as ham
      (<code>mh-junk-whitelist</code>).</p>
    </dd>

    <dt>
    <kbd><code>mh-spamassassin-identify-spammers</code></kbd></dt>

    <dd>
      <p>Identify spammers who are repeat offenders.</p>
    </dd>
  </dl><a name="index-mh_002djunk-customization-group" id=
  "index-mh_002djunk-customization-group"></a> <a name=
  "index-customization-group_002c-mh_002djunk" id=
  "index-customization-group_002c-mh_002djunk"></a>

  <p>The following table lists the options from the
  &lsquo;<samp>mh-junk</samp>&rsquo; customization group.</p>

  <dl compact="compact">
    <dt><code>mh-junk-background</code> <a name=
    "index-mh_002djunk_002dbackground" id=
    "index-mh_002djunk_002dbackground"></a></dt>

    <dd>
      <p>If on, spam programs are run in background (default:
      &lsquo;<samp>off</samp>&rsquo;).</p>
    </dd>

    <dt><code>mh-junk-disposition</code> <a name=
    "index-mh_002djunk_002ddisposition" id=
    "index-mh_002djunk_002ddisposition"></a></dt>

    <dd>
      <p>Disposition of junk mail (default: &lsquo;<samp>Delete
      Spam</samp>&rsquo;).</p>
    </dd>

    <dt><code>mh-junk-program</code> <a name=
    "index-mh_002djunk_002dprogram" id=
    "index-mh_002djunk_002dprogram"></a></dt>

    <dd>
      <p>Spam program that MH-E should use (default:
      &lsquo;<samp>Auto-detect</samp>&rsquo;).</p>
    </dd>
  </dl><a name="index-mh_002dsequences-customization-group-1" id=
  "index-mh_002dsequences-customization-group-1"></a> <a name=
  "index-customization-group_002c-mh_002dsequences-1" id=
  "index-customization-group_002c-mh_002dsequences-1"></a>

  <p>The following option in the
  &lsquo;<samp>mh-sequences</samp>&rsquo; customization group is
  also available.</p>

  <dl compact="compact">
    <dt><code>mh-whitelist-preserves-sequences-flag</code> <a name=
    "index-mh_002dwhitelist_002dpreserves_002dsequences_002dflag-1"
    id=
    "index-mh_002dwhitelist_002dpreserves_002dsequences_002dflag-1">
    </a></dt>

    <dd>
      <p>On means that sequences are preserved when messages are
      whitelisted (default: &lsquo;<samp>on</samp>&rsquo;).</p>
    </dd>
  </dl>

  <p>The following hooks are available.</p>

  <dl compact="compact">
    <dt><code>mh-blacklist-msg-hook</code> <a name=
    "index-mh_002dblacklist_002dmsg_002dhook" id=
    "index-mh_002dblacklist_002dmsg_002dhook"></a></dt>

    <dd>
      <p>Hook run by <kbd>J b</kbd>
      (<code>mh-junk-blacklist</code>) after marking each message
      for blacklisting (default: <code>nil</code>).</p>
    </dd>

    <dt><code>mh-whitelist-msg-hook</code> <a name=
    "index-mh_002dwhitelist_002dmsg_002dhook" id=
    "index-mh_002dwhitelist_002dmsg_002dhook"></a></dt>

    <dd>
      <p>Hook run by <kbd>J w</kbd>
      (<code>mh-junk-whitelist</code>) after marking each message
      for whitelisting (default
      &lsquo;<samp>nil</samp>&rsquo;).</p>
    </dd>
  </dl>

  <p>The following faces are available.</p>

  <dl compact="compact">
    <dt><code>mh-folder-blacklisted</code> <a name=
    "index-mh_002dfolder_002dblacklisted" id=
    "index-mh_002dfolder_002dblacklisted"></a></dt>

    <dd>
      <p>Blacklisted message face.</p>
    </dd>

    <dt><code>mh-folder-whitelisted</code> <a name=
    "index-mh_002dfolder_002dwhitelisted" id=
    "index-mh_002dfolder_002dwhitelisted"></a></dt>

    <dd>
      <p>Whitelisted message face</p>
    </dd>
  </dl><a name="index-SpamProbe" id="index-SpamProbe"></a> <a name=
  "index-Spamassassin" id="index-Spamassassin"></a> <a name=
  "index-bogofilter" id="index-bogofilter"></a> <a name=
  "index-spam-filters_002c-SpamProbe" id=
  "index-spam-filters_002c-SpamProbe"></a> <a name=
  "index-spam-filters_002c-Spamassassin" id=
  "index-spam-filters_002c-Spamassassin"></a> <a name=
  "index-spam-filters_002c-bogofilter" id=
  "index-spam-filters_002c-bogofilter"></a>

  <p>MH-E depends on <a href=
  "http://spamassassin.apache.org/">SpamAssassin</a>, <a href=
  "http://bogofilter.sourceforge.net/">bogofilter</a>, or <a href=
  "http://spamprobe.sourceforge.net/">SpamProbe</a> to throw the
  dreck away. This chapter describes briefly how to configure these
  programs to work well with MH-E and how to use MH-E&rsquo;s
  interface that provides continuing education for these
  programs.</p><a name="index-mh_002djunk_002dprogram-1" id=
  "index-mh_002djunk_002dprogram-1"></a>

  <p>The default setting of the option <code>mh-junk-program</code>
  is &lsquo;<samp>Auto-detect</samp>&rsquo; which means that MH-E
  will automatically choose one of SpamAssassin, bogofilter, or
  SpamProbe in that order. If, for example, you have both
  SpamAssassin and bogofilter installed and you want to use
  bogofilter, then you can set this option to
  &lsquo;<samp>Bogofilter</samp>&rsquo;.</p><a name=
  "index-mh_002djunk_002dblacklist-1" id=
  "index-mh_002djunk_002dblacklist-1"></a> <a name="index-J-b-1"
  id="index-J-b-1"></a> <a name=
  "index-mh_002djunk_002ddisposition-1" id=
  "index-mh_002djunk_002ddisposition-1"></a>

  <p>The command <kbd>J b</kbd> (<code>mh-junk-blacklist</code>)
  trains the spam program in use with the content of the range (see
  <a href="Ranges.html#Ranges">Ranges</a>) and then handles the
  message(s) as specified by the option
  <code>mh-junk-disposition</code>. By default, this option is set
  to &lsquo;<samp>Delete Spam</samp>&rsquo; but you can also
  specify the name of the folder which is useful for building a
  corpus of spam for training purposes.</p><a name=
  "index-mh_002djunk_002dwhitelist-1" id=
  "index-mh_002djunk_002dwhitelist-1"></a> <a name="index-J-w-1"
  id="index-J-w-1"></a>

  <p>In contrast, the command <kbd>J w</kbd>
  (<code>mh-junk-whitelist</code>) reclassifies a range of messages
  (see <a href="Ranges.html#Ranges">Ranges</a>) as ham if it were
  incorrectly classified as spam. It then refiles the message into
  the <samp>+inbox</samp> folder.</p><a name=
  "index-MH-profile-component_002c-Previous_002dSequence-2" id=
  "index-MH-profile-component_002c-Previous_002dSequence-2"></a>
  <a name="index-cur-sequence-2" id="index-cur-sequence-2"></a>
  <a name="index-Previous_002dSequence-MH-profile-component-2" id=
  "index-Previous_002dSequence-MH-profile-component-2"></a>
  <a name="index-sequence_002c-cur-2" id=
  "index-sequence_002c-cur-2"></a> <a name=
  "index-sequence_002c-Previous_002dSequence-1" id=
  "index-sequence_002c-Previous_002dSequence-1"></a> <a name=
  "index-mh_002dwhitelist_002dpreserves_002dsequences_002dflag-2"
  id=
  "index-mh_002dwhitelist_002dpreserves_002dsequences_002dflag-2"></a>

  <p>If a message is in any sequence (except
  &lsquo;<samp>Previous-Sequence:</samp>&rsquo; and
  &lsquo;<samp>cur</samp>&rsquo;) when it is whitelisted, then it
  will still be in those sequences in the destination folder. If
  this behavior is not desired, then turn off the option
  <code>mh-whitelist-preserves-sequences-flag</code>.</p><a name=
  "index-_002aMH_002dE-Log_002a" id=
  "index-_002aMH_002dE-Log_002a"></a> <a name=
  "index-buffers_002c-_002aMH_002dE-Log_002a" id=
  "index-buffers_002c-_002aMH_002dE-Log_002a"></a> <a name=
  "index-call_002dprocess" id="index-call_002dprocess"></a>
  <a name="index-mh_002djunk_002dbackground-1" id=
  "index-mh_002djunk_002dbackground-1"></a>

  <p>By default, the programs are run in the foreground, but this
  can be slow when junking large numbers of messages. If you have
  enough memory or don&rsquo;t junk that many messages at the same
  time, you might try turning on the option
  <code>mh-junk-background</code>. <a name="DOCF54" href="#FOOT54"
  id="DOCF54"><sup>54</sup></a></p>

  <p>The following sections discuss the various counter-spam
  measures that MH-E can work with.</p><a name=
  "index-_002eprocmailrc-1" id="index-_002eprocmailrc-1"></a>
  <a name="index-files_002c-_002eprocmailrc-1" id=
  "index-files_002c-_002eprocmailrc-1"></a> <a name="SpamAssassin"
  id="SpamAssassin"></a>

  <h4 class="subheading">SpamAssassin</h4><a name=
  "index-Spamassassin-1" id="index-Spamassassin-1"></a> <a name=
  "index-spam-filters_002c-Spamassassin-1" id=
  "index-spam-filters_002c-Spamassassin-1"></a>

  <p>SpamAssassin is one of the more popular spam filtering
  programs. Get it from your local distribution or from the
  <a href="http://spamassassin.apache.org/">SpamAssassin web
  site</a>.</p>

  <p>To use SpamAssassin, add the following recipes to
  <samp>~/.procmailrc</samp>:</p><a name="index-spamc" id=
  "index-spamc"></a> <a name=
  "index-X_002dSpam_002dLevel-header-field" id=
  "index-X_002dSpam_002dLevel-header-field"></a> <a name=
  "index-X_002dSpam_002dStatus-header-field" id=
  "index-X_002dSpam_002dStatus-header-field"></a> <a name=
  "index-header-field_002c-X_002dSpam_002dLevel" id=
  "index-header-field_002c-X_002dSpam_002dLevel"></a> <a name=
  "index-header-field_002c-X_002dSpam_002dStatus" id=
  "index-header-field_002c-X_002dSpam_002dStatus"></a>

  <div class="smallexample">
    <pre class="smallexample">
PATH=$PATH:/usr/bin/mh
MAILDIR=$HOME/`mhparam Path`

# Fight spam with SpamAssassin.
:0fw
| spamc

# Anything with a spam level of 10 or more is junked immediately.
:0:
* ^X-Spam-Level: ..........
/dev/null

:0:
* ^X-Spam-Status: Yes
spam/.
</pre>
  </div>

  <p>If you don&rsquo;t use <code>spamc</code>, use
  &lsquo;<samp>spamassassin -P -a</samp>&rsquo;.</p>

  <p>Note that one of the recipes above throws away messages with a
  score greater than or equal to 10. Here&rsquo;s how you can
  determine a value that works best for you.</p>

  <p>First, run &lsquo;<samp>spamassassin -t</samp>&rsquo; on every
  mail message in your archive and use <code>gnumeric</code> to
  verify that the average plus the standard deviation of good mail
  is under 5, the SpamAssassin default for &ldquo;spam&rdquo;.</p>

  <p>Using <code>gnumeric</code>, sort the messages by score and
  view the messages with the highest score. Determine the score
  which encompasses all of your interesting messages and add a
  couple of points to be conservative. Add that many dots to the
  &lsquo;<samp>X-Spam-Level:</samp>&rsquo; header field above to
  send messages with that score down the drain.</p>

  <p>In the example above, messages with a score of 5&ndash;9 are
  set aside in the &lsquo;<samp>+spam</samp>&rsquo; folder for
  later review. The major weakness of rules-based filters is a
  plethora of false positives so it is worthwhile to
  check.</p><a name="index-mh_002djunk_002dblacklist-2" id=
  "index-mh_002djunk_002dblacklist-2"></a> <a name=
  "index-mh_002djunk_002dwhitelist-2" id=
  "index-mh_002djunk_002dwhitelist-2"></a> <a name="index-J-b-2"
  id="index-J-b-2"></a> <a name="index-J-w-2" id="index-J-w-2"></a>

  <p>If SpamAssassin classifies a message incorrectly, or is
  unsure, you can use the MH-E commands <kbd>J b</kbd>
  (<code>mh-junk-blacklist</code>) and <kbd>J w</kbd>
  (<code>mh-junk-whitelist</code>).</p><a name="index-sa_002dlearn"
  id="index-sa_002dlearn"></a> <a name=
  "index-_002espamassassin_002fuser_005fprefs" id=
  "index-_002espamassassin_002fuser_005fprefs"></a> <a name=
  "index-files_002c-_002espamassassin_002fuser_005fprefs" id=
  "index-files_002c-_002espamassassin_002fuser_005fprefs"></a>

  <p>The command <kbd>J b</kbd> (<code>mh-junk-blacklist</code>)
  adds a &lsquo;<samp>blacklist_from</samp>&rsquo; entry to
  <samp>~/spamassassin/user_prefs</samp>, deletes the message, and
  sends the message to the Razor, so that others might not see this
  spam. If the <code>sa-learn</code> command is available, the
  message is also recategorized as spam.</p>

  <p>The command<kbd>J w</kbd> (<code>mh-junk-whitelist</code>)
  adds a &lsquo;<samp>whitelist_from</samp>&rsquo; rule to
  &lsquo;<samp>~/.spamassassin/user_prefs</samp>&rsquo;. If the
  <code>sa-learn</code> command is available, the message is also
  recategorized as ham.</p>

  <p>Over time, you&rsquo;ll observe that the same host or domain
  occurs repeatedly in the
  &lsquo;<samp>blacklist_from</samp>&rsquo; entries, so you might
  think that you could avoid future spam by blacklisting all mail
  from a particular domain. The utility function
  <code>mh-spamassassin-identify-spammers</code> helps you do
  precisely that. This function displays a frequency count of the
  hosts and domains in the
  &lsquo;<samp>blacklist_from</samp>&rsquo; entries from the last
  blank line in <samp>~/.spamassassin/user_prefs</samp> to the end
  of the file. This information can be used so that you can replace
  multiple &lsquo;<samp>blacklist_from</samp>&rsquo; entries with a
  single wildcard entry such as:</p>

  <div class="smallexample">
    <pre class="smallexample">
blacklist_from *@*amazingoffersdirect2u.com
</pre>
  </div>

  <p>In versions of SpamAssassin (2.50 and on) that support a
  Bayesian classifier, <kbd>J b</kbd>
  <code>(mh-junk-blacklist</code>) uses the program
  <code>sa-learn</code> to recategorize the message as spam.
  Neither MH-E, nor SpamAssassin, rebuilds the database after
  adding words, so you will need to run &lsquo;<samp>sa-learn
  --rebuild</samp>&rsquo; periodically. This can be done by adding
  the following to your <samp>crontab</samp>:</p>

  <div class="smallexample">
    <pre class="smallexample">
0 * * * *       sa-learn --rebuild &gt; /dev/null 2&gt;&amp;1
</pre>
  </div><a name="Bogofilter" id="Bogofilter"></a>

  <h4 class="subheading">Bogofilter</h4><a name=
  "index-bogofilter-1" id="index-bogofilter-1"></a> <a name=
  "index-spam-filters_002c-bogofilter-1" id=
  "index-spam-filters_002c-bogofilter-1"></a>

  <p>Bogofilter is a Bayesian spam filtering program. Get it from
  your local distribution or from the <a href=
  "http://bogofilter.sourceforge.net/">bogofilter web site</a>.</p>

  <p>Bogofilter is taught by running:</p>

  <div class="smallexample">
    <pre class="smallexample">
bogofilter -n &lt; good-message
</pre>
  </div>

  <p>on every good message, and</p>

  <div class="smallexample">
    <pre class="smallexample">
bogofilter -s &lt; spam-message
</pre>
  </div><a name="index-full-training" id="index-full-training"></a>

  <p>on every spam message. This is called a <em>full
  training</em>; three other training methods are described in the
  FAQ that is distributed with bogofilter. Note that most Bayesian
  filters need 1000 to 5000 of each type of message to start doing
  a good job.</p>

  <p>To use bogofilter, add the following recipes to
  <samp>~/.procmailrc</samp>:</p><a name=
  "index-X_002dBogosity-header-field" id=
  "index-X_002dBogosity-header-field"></a> <a name=
  "index-header-field_002c-X_002dBogosity" id=
  "index-header-field_002c-X_002dBogosity"></a>

  <div class="smallexample">
    <pre class="smallexample">
PATH=$PATH:/usr/bin/mh
MAILDIR=$HOME/`mhparam Path`

# Fight spam with Bogofilter.
:0fw
| bogofilter -3 -e -p

:0:
* ^X-Bogosity: Yes, tests=bogofilter
spam/.

:0:
* ^X-Bogosity: Unsure, tests=bogofilter
spam/unsure/.
</pre>
  </div><a name="index-mh_002djunk_002dblacklist-3" id=
  "index-mh_002djunk_002dblacklist-3"></a> <a name=
  "index-mh_002djunk_002dwhitelist-3" id=
  "index-mh_002djunk_002dwhitelist-3"></a> <a name="index-J-b-3"
  id="index-J-b-3"></a> <a name="index-J-w-3" id="index-J-w-3"></a>

  <p>If bogofilter classifies a message incorrectly, or is unsure,
  you can use the MH-E commands <kbd>J b</kbd>
  (<code>mh-junk-blacklist</code>) and <kbd>J w</kbd>
  (<code>mh-junk-whitelist</code>) to update bogofilter&rsquo;s
  training.</p>

  <p>The <cite>Bogofilter FAQ</cite> suggests that you run the
  following occasionally to shrink the database:</p>

  <div class="smallexample">
    <pre class="smallexample">
bogoutil -d wordlist.db | bogoutil -l wordlist.db.new
mv wordlist.db wordlist.db.prv
mv wordlist.db.new wordlist.db
</pre>
  </div>

  <p>The <cite>Bogofilter tuning HOWTO</cite> describes how you can
  fine-tune bogofilter.</p><a name="SpamProbe" id="SpamProbe"></a>

  <h4 class="subheading">SpamProbe</h4><a name="index-SpamProbe-1"
  id="index-SpamProbe-1"></a> <a name=
  "index-spam-filters_002c-SpamProbe-1" id=
  "index-spam-filters_002c-SpamProbe-1"></a>

  <p>SpamProbe is a Bayesian spam filtering program. Get it from
  your local distribution or from the <a href=
  "http://spamprobe.sourceforge.net">SpamProbe web site</a>.</p>

  <p>To use SpamProbe, add the following recipes to
  <samp>~/.procmailrc</samp>:</p><a name="index-formail" id=
  "index-formail"></a> <a name="index-X_002dSpamProbe-header-field"
  id="index-X_002dSpamProbe-header-field"></a> <a name=
  "index-header-field_002c-X_002dSpamProbe" id=
  "index-header-field_002c-X_002dSpamProbe"></a>

  <div class="smallexample">
    <pre class="smallexample">
PATH=$PATH:/usr/bin/mh
MAILDIR=$HOME/`mhparam Path`

# Fight spam with SpamProbe.
:0
SCORE=| spamprobe receive

:0 wf
| formail -I "X-SpamProbe: $SCORE"

:0:
*^X-SpamProbe: SPAM
spam/.
</pre>
  </div><a name="index-mh_002djunk_002dblacklist-4" id=
  "index-mh_002djunk_002dblacklist-4"></a> <a name=
  "index-mh_002djunk_002dwhitelist-4" id=
  "index-mh_002djunk_002dwhitelist-4"></a> <a name="index-J-b-4"
  id="index-J-b-4"></a> <a name="index-J-w-4" id="index-J-w-4"></a>

  <p>If SpamProbe classifies a message incorrectly, you can use the
  MH-E commands <kbd>J b</kbd> (<code>mh-junk-blacklist</code>) and
  <kbd>J w</kbd> (<code>mh-junk-whitelist</code>) to update
  SpamProbe&rsquo;s training.</p><a name="Other-Things-You-Can-Do"
  id="Other-Things-You-Can-Do"></a>

  <h4 class="subheading">Other Things You Can Do</h4>

  <p>There are a couple of things that you can add to
  <samp>~/.procmailrc</samp> in order to filter out a lot of spam
  and viruses. The first is to eliminate any message with a Windows
  executable (which is most likely a virus). The second is to
  eliminate mail in character sets that you can&rsquo;t
  read.</p><a name=
  "index-Content_002dTransfer_002dEncoding-header-field" id=
  "index-Content_002dTransfer_002dEncoding-header-field"></a>
  <a name="index-Content_002dType-header-field" id=
  "index-Content_002dType-header-field"></a> <a name=
  "index-Subject-header-field-1" id=
  "index-Subject-header-field-1"></a> <a name=
  "index-header-field_002c-Content_002dTransfer_002dEncoding" id=
  "index-header-field_002c-Content_002dTransfer_002dEncoding"></a>
  <a name="index-header-field_002c-Content_002dType" id=
  "index-header-field_002c-Content_002dType"></a> <a name=
  "index-header-field_002c-Subject-1" id=
  "index-header-field_002c-Subject-1"></a>

  <div class="smallexample">
    <pre class="smallexample">
PATH=$PATH:/usr/bin/mh
MAILDIR=$HOME/`mhparam Path`

#
# Filter messages with w32 executables/virii.
#
# These attachments are base64 and have a TVqQAAMAAAAEAAAA//8AALg
# pattern. The string "this program cannot be run in MS-DOS mode"
# encoded in base64 is 4fug4AtAnNIbg and helps to avoid false
# positives (Roland Smith via Pete from the bogofilter mailing list).
#
:0 B:
* ^Content-Transfer-Encoding:.*base64
* ^TVqQAAMAAAAEAAAA//8AALg
* 4fug4AtAnNIbg
spam/exe/.

#
# Filter mail in unreadable character sets (from the Bogofilter FAQ).
#
UNREADABLE='[^?"]*big5|iso-2022-jp|ISO-2022-KR|euc-kr|gb2312|ks_c_5601-1987'

:0:
* 1^0 $ ^Subject:.*=\?($UNREADABLE)
* 1^0 $ ^Content-Type:.*charset="?($UNREADABLE)
spam/unreadable/.

:0:
* ^Content-Type:.*multipart
* B ?? $ ^Content-Type:.*^?.*charset="?($UNREADABLE)
spam/unreadable/.
</pre>
  </div>

  <div class="footnote">
    <hr />

    <h4 class="footnotes-heading">Footnotes</h4>

    <h3><a name="FOOT54" href="#DOCF54" id="FOOT54">(54)</a></h3>

    <p>Note that the option <code>mh-junk-background</code> is used
    as the <code>display</code> argument in the call to
    <code>call-process</code>. Therefore, turning on this option
    means setting its value to &lsquo;<samp>0</samp>&rsquo;. You
    can also set its value to &lsquo;<samp>t</samp>&rsquo; to
    direct the programs&rsquo; output to the <samp>*MH-E
    Log*</samp> buffer; this may be useful for debugging.</p>
  </div>
  <hr />

  <div class="header">
    <p>Next: <a href="Miscellaneous.html#Miscellaneous" accesskey=
    "n" rel="next">Miscellaneous</a>, Previous: <a href=
    "Sequences.html#Sequences" accesskey="p" rel=
    "prev">Sequences</a>, Up: <a href="index.html#Top" accesskey=
    "u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents"
    title="Table of contents" rel="contents">Contents</a>][<a href=
    "Key-Index.html#Key-Index" title="Index" rel=
    "index">Index</a>]</p>
  </div>
</body>
</html>
