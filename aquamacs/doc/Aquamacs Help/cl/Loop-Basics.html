<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 16.1), see www.w3.org" />

  <title>Loop Basics - Common Lisp Extensions</title>
  <meta http-equiv="Content-Type" content="text/html" />
  <meta name="description" content="Common Lisp Extensions" />
  <meta name="generator" content="makeinfo 4.13" />
  <link title="Top" rel="start" href="index.html#Top" />
  <link rel="up" href="Loop-Facility.html#Loop-Facility" title=
  "Loop Facility" />
  <link rel="prev" href="Loop-Facility.html#Loop-Facility" title=
  "Loop Facility" />
  <link rel="next" href="Loop-Examples.html#Loop-Examples" title=
  "Loop Examples" />
  <link href="http://www.gnu.org/software/texinfo/" rel=
  "generator-home" title="Texinfo Homepage" /><!--
This file documents the GNU Emacs Common Lisp emulation package.

Copyright (C) 1993, 2001, 2002, 2003, 2004, 2005, 2006, 2007,
2008, 2009, 2010  Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover texts
     being ``A GNU Manual'', and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License''.

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <style type="text/css">
/*<![CDATA[*/
  <!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; }
  span.sansserif { font-family:sans-serif; font-weight:normal; }
  -->
  /*]]>*/
  </style>
</head>

<body>
  <div class="node">
    <a name="Loop-Basics" id="Loop-Basics"></a>

    <p>Next:&nbsp;<a rel="next" accesskey="n" href=
    "Loop-Examples.html#Loop-Examples">Loop Examples</a>,
    Previous:&nbsp;<a rel="previous" accesskey="p" href=
    "Loop-Facility.html#Loop-Facility">Loop Facility</a>,
    Up:&nbsp;<a rel="up" accesskey="u" href=
    "Loop-Facility.html#Loop-Facility">Loop Facility</a></p>
    <hr />
  </div>

  <h4 class="subsection">5.7.1 Loop Basics</h4>

  <p class="noindent">The <code>loop</code> macro essentially
  creates a mini-language within Lisp that is specially tailored
  for describing loops. While this language is a little
  strange-looking by the standards of regular Lisp, it turns out to
  be very easy to learn and well-suited to its purpose.</p>

  <p>Since <code>loop</code> is a macro, all parsing of the loop
  language takes place at byte-compile time; compiled
  <code>loop</code>s are just as efficient as the equivalent
  <code>while</code> loops written longhand.</p>

  <div class="defun">
    &mdash; Special Form: <b>loop</b> <var>clauses<small class=
    "dots">...</small><a name="index-loop-52" id=
    "index-loop-52"></a></var><br />

    <blockquote>
      <p>A loop construct consists of a series of
      <var>clause</var>s, each introduced by a symbol like
      <code>for</code> or <code>do</code>. Clauses are simply
      strung together in the argument list of <code>loop</code>,
      with minimal extra parentheses. The various types of clauses
      specify initializations, such as the binding of temporary
      variables, actions to be taken in the loop, stepping actions,
      and final cleanup.</p>

      <p>Common Lisp specifies a certain general order of clauses
      in a loop:</p>
      <pre class="example">
          (loop <var>name-clause</var>
                <var>var-clauses</var>...
                <var>action-clauses</var>...)
</pre>

      <p>The <var>name-clause</var> optionally gives a name to the
      implicit block that surrounds the loop. By default, the
      implicit block is named <code>nil</code>. The
      <var>var-clauses</var> specify what variables should be bound
      during the loop, and how they should be modified or iterated
      throughout the course of the loop. The
      <var>action-clauses</var> are things to be done during the
      loop, such as computing, collecting, and returning
      values.</p>

      <p>The Emacs version of the <code>loop</code> macro is less
      restrictive about the order of clauses, but things will
      behave most predictably if you put the variable-binding
      clauses <code>with</code>, <code>for</code>, and
      <code>repeat</code> before the action clauses. As in Common
      Lisp, <code>initially</code> and <code>finally</code> clauses
      can go anywhere.</p>

      <p>Loops generally return <code>nil</code> by default, but
      you can cause them to return a value by using an accumulation
      clause like <code>collect</code>, an end-test clause like
      <code>always</code>, or an explicit <code>return</code>
      clause to jump out of the implicit block. (Because the loop
      body is enclosed in an implicit block, you can also use
      regular Lisp <code>return</code> or <code>return-from</code>
      to break out of the loop.)</p>
    </blockquote>
  </div>

  <p>The following sections give some examples of the Loop Macro in
  action, and describe the particular loop clauses in great detail.
  Consult the second edition of Steele's <dfn>Common Lisp, the
  Language</dfn>, for additional discussion and examples of the
  <code>loop</code> macro.</p>
</body>
</html>
